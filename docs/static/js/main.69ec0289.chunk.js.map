{"version":3,"sources":["assets/imgs/build-number.png","assets/imgs/attack-bomb.png","assets/imgs/attack-fog.png","assets/imgs/attack-lock.png","assets/imgs/defense-bomb.png","assets/imgs/defense-fog.png","assets/imgs/defense-lock.png","assets/imgs/defense-mirror.png","assets/imgs/logo-bingo.png","services/i18n/type.js","services/i18n/reducer.js","services/i18n/index.jsx","services/game/firebase.js","services/game/service.fn.js","services/game/reducer.js","services/game/index.jsx","components/bs/options.fn.js","components/bs/options.type.js","components/bs/Grid.jsx","services/custom/events.js","components/bs/Modal.jsx","components/bs/Collapse.jsx","components/panel/IntroModal.jsx","components/bs/Card.jsx","components/panel/BingoCard.jsx","components/panel/options.type.js","components/panel/Territories.jsx","components/panel/GameStep.jsx","components/App.jsx","index.js"],"names":["module","exports","lang","Language","EN","Symbol","ZH","DEFAULT_LANG","localStorage","getItem","navigator","language","toLowerCase","substring","indexOf","undefined","StateStore","state","locale","messages","ActionStore","action","getI18n","then","intl","dispatch","default","useI18n","useContext","Context","createContext","get","set","I18n","children","useReducer","$dispatch","getMessage","useCallback","code","toUpperCase","Provider","value","connectWebsocket","gameRoom","fn","on","snapshot","key","val","GameRoom","userID","gameID","type","child","launcher","ref","database","uid","once","exists","remove","websocketFn","push","owner","status","competitor","newGame","setItem","STORAGE_GAME_ID","content","Promise","resolve","reject","values","this","search","update","caller","rounds","Firebase","initializeApp","JSON","parse","generate","opts","count","window","DECODE_NAME","FIREBASE_OPTIONS","DECODE_COUNT","STORAGE_USER_ID","uuidv4","bingo","doSearch","catch","err","doCreate","create","doJoin","join","doSay","msg","sender","doAttack","attack","newAttack","isReflection","description","ranges","step","effects","ignoreMirror","doReflection","isValidAttack","attackIDs","Object","keys","lastID","length","emptyFn","imgs","build_number","defense_bomb","attack_bomb","defense_fog","attack_fog","defense_lock","attack_lock","defense_mirror","getZIndex","x","y","Math","floor","getEffects","built","stong","mirror","isAttack","validAtt","newMirror","GameBase","occupied","fog","getCards","CARDS","map","card","reduce","ccResult","name","CamelCase","getRoundCard","cards","list","rangeX","rangeY","i","splice","ceil","random","sort","reverse","console","log","getAction","params","getRounds","newRound","isMyTurn","slice","getNumbers","zones","effect","nums","number","zone","result","numbers","bgClass","parseFloat","newZones","z","land","getCardImage","getCardParams","target","Error","doWebsocket","doResponse","onSuccess","onFail","useCardRange","useMemo","StateReducer","round","ServiceFn","ActionReducer","defenseParams","isNaN","defaultOptions","GameContext","GameCustom","useCardImage","useAllCards","useGame","Game","isBreakPointOpts","options","filter","prop","getSpacingClass","kind","cls","forEach","breakpoint","getBsClass","size","start","end","$value","uniqueArray","arr","getColorClasses","bg","border","text","getContainerClasses","display","className","margin","padding","rounded","hidden","colors","def","arrow","getBorderClass","getRoundedClass","hiddenOn","Array","isArray","getDisplayClass","BsColors","PropTypes","oneOf","BsContainerColor","exact","Spacing","MarginAuto","Margin","oneOfType","t","b","l","r","Padding","BsMargin","sm","md","lg","xl","BsPadding","BsBorder","bool","BsRounded","Col12","ColWidth","ColOrder","BreakPoint","BsHidden","arrayOf","BsColWidth","BsColOffset","BsColOrder","BsTagName","string","elementType","BsChildren","any","isRequired","CLOSE_MODAL","BsContainer","props","createElement","tagName","propTypes","object","BsRow","gutters","align","alignable","getColOptions","getColClasses","width","offset","order","option","BsCol","getInvalid","BsModal","show","isShow","setShow","backdrop","icon","title","btns","handler","onShow","handlerFn","useEffect","doCloseModal","onHandler","onClickBackdrop","e","$","hasClass","useEvents","onClick","aria-hidden","btnIcon","color","BsCollapse","useGameID","setValue","validation","useState","invalid","setInvalid","vres","useChange","URL","location","href","searchParams","replace","id","IntroModal","onChangeID","invalidID","expand","setExpand","doSwitch","collapseID","history","replaceState","document","onSubmit","preventDefault","stopPropagation","onSwitch","onNewGame","open","encodeURIComponent","onJoinGame","useIntroModal","alt","src","logo","onChange","disabled","trim","BsCardExtends","defaultPropTypes","BsCardTitle","defaultProps","BsCardText","BsCardHeader","BsCardBody","BsCardFooter","BsCard","image","visibled","setVisibled","onImageLoad","useCustomCard","onLoad","BingoCard","onUseCard","doUseCard","useBingoCard","lengnth","EmptyNumbers","DefaultZones","0","1","2","3","4","5","6","7","8","Land","isSelecting","onSelected","n","landRef","useRef","prevEffects","$effects","current","isDefensing","tipContent","popover","toggle","container","html","trigger","placement","$built","$stong","$fog","$occupied","$mirror","selectable","displayText","animation","useLand","style","Territories","cursor","mode","hoverOn","isMime","clientX","clientY","cursorOn","setCursorOn","onHoverCursor","el","elementFromPoint","classList","contains","hoverX","getAttribute","hoverY","hoverZ","useTerritories","onMouseMove","onMouseLeave","top","left","opacity","CenterMessage","onClose","Step","Waiting","onCancelWaiting","Finish","onGameFinish","Switch","GetCard","onGetCard","ShowCard","Attack","GameStep","useStepName","func","App","defenseRange","onBackToMenu","reload","useCustom","ReactDOM","render","component","getElementById"],"mappings":"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","file":"static/js/main.69ec0289.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/build-number.29b0c1e0.png\";","module.exports = __webpack_public_path__ + \"static/media/attack-bomb.46db2040.png\";","module.exports = __webpack_public_path__ + \"static/media/attack-fog.b61bc358.png\";","module.exports = __webpack_public_path__ + \"static/media/attack-lock.2cdb76ee.png\";","module.exports = __webpack_public_path__ + \"static/media/defense-bomb.ef3fe63a.png\";","module.exports = __webpack_public_path__ + \"static/media/defense-fog.4f4089fb.png\";","module.exports = __webpack_public_path__ + \"static/media/defense-lock.06459341.png\";","module.exports = __webpack_public_path__ + \"static/media/defense-mirror.9191c787.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAH/lJREFUeNrtnXuQJVV9x7997mPunZmdh8vOPlhYFnVhgUWDEcOqQHAQg4iRMibGIppoYWkwmioTLSupIpoiVYkmKUoNWmqZxFjiiyCKgCMsRjYQ5CEIsriP2RfszszOzvs+u0/+6Htn+vbt7tuvO/PrPr/zD86Mv8+e07c/3af7dH8vwI0bN2WbFhUwOnqlZuPIsbE9knnMYx59XjZsYaMzGfvvxsb2GMxjHvMSwdNCHQAaR6EMbEciADrzmMe8RPAEABn4ANAozjp1JsxUhHnMY96q8zINRrBLgEZx3qEztQidYR7zmLd6vKyF4/8A0CjucehMNUJnmMc85q0eL99gNOv9XQKMjl4pABQcOlMJ2RnmMY95q8vLWzgAgLGxPZ0PAI3iokNnymHuQDKPecxbdV4BtjP/2NgeHehwCWDpjHX5wQBQitCZXph3IJnHPOZ1n1ds/Cgt/11ePch6FGtonYZojeKlCJ3pR/uRjXnMY153eL0WTvO/detlhHApdrsBsRDz4JjHPOZ1jydsvLYbiFmHYqelBwPxH9mobSzmMS9tPOuZ3/EGYtZW7PbQQZRrkKRsLOYxL628stvqgWYDZGFOG0Tjbxp83n28ePc7Rqo5vDyjmzcMNUiRFUYBkJZpiGbUDVGW0AIPjnnx8rS67KkJsdWQopLR5LgBUabUP+Y5Nz0DPV/Dgaf33jlh/b2L/Do6zNw1CyCDFfGbnap2kv+8y9+2PSPF5wFcaxtg22Go9TeBNxjzmMe8lXaPrhk37/vZ3YeizCQ0oOXlAOuZv+MTRw35HwEwQnxjMY95aeRNSE3ffWZ+YRIhLyOaZ/pQjxs2zvwsP/OYtza8kQzEFxHhHoJ9GbBtndCtXbz7HSPgaT/zmLemPEi8eb7au8GCDHQD0X4A8P2KYTWHlydtYzGPeWnklSAuQcjVg+VXA4MWZnRkpJa8jcU85qWNZ0AbQcilwyxgvhVEdXDMYx7zOvJ+FTYaLHQmoAYpkMyNxTzmpYqnGaIehhclE1BMVY1C3TJvSMrGYh7zVOdFzQRsPHQgRXP1oVNnes69xIMooUkDkJajiaZBas1HEoI25rnxKgef8EV8y1B25SlymJhMhJ1XN+9WMy9g+9FMrVEeu/yhMwHbnjjyI3/f637f+Y9SAnqlbedFpsf8b9DGPE9e5eCTaN0z29tQBvjopuIKDkBBiJCHJqBsGHYXmOe7LeGemWrc8rdkAooAxYHl995a6ZIr8Tw01pVbfqYjg4o8Pf4zf1vAaJBMQNuzxprB8qeEh/ZpJjUZVORZgRHld80E7DgDsCSLtBw56kawt8dWKonLoBoPLD91XgzytwWMNjMBhY/iItqTRRbCvAJJXgbVeGiXH6Atg2q8GOR3ChhdzgQUHsUanKOJQz1xRF4G1XjwWFcOwUqiXNR50CLL3zZzx1pkApKXQTUe4l1aSqJcSeCFXYoklQkIEJdBNR5Y/qTwwjRSmYAAHB9SISODajyw/GnmhckEtM8AMi7F4eSHpCuDgjyWP708F/k7fqlI1gJwkr8SRf6WgRCTQUUey59OnvliXrgvFckCy1N/ex9DfQtpo0MsP2Eey58eHgCY6cLhbtg3ZwD24lDfP26CWH7KPJY/PTyzXgIt0eLBVuvs9wAkAsSCOXWmbZqpCbIyqMZj+dPDM+vbPs3AS/WhMwE7dWZlZ6Mpg4o8lj8dPLM+uvxAhExAr85EOdMkVa5E8EI06jKoxjPr7XZpBkI+pCcAQpmASZYrhTzqMqjGM+vbfasbIvRSPZ1MQOIyqMajLoNqPLPe9TI7lPx0MgGJy6Aaj7oMqvHM+u5kAgZ+4Lg1EzB6Z6jLoBwPtGVQjWfWdyUTEECASLBGMceCpZkHc2ejKoNqPLM+dvlb3vXhTEDmrZS3vo1OSgYVeZwJyLzV4aH9TENNBhV5VmBE+TkTkHnujeWnzYtBfs4EZJ5z40xA2rwY5OdMQOY5N84EpM2DFll+zgRknnPjcBD6PM4EdMQxj+VXgxemcSYg8zwby59eXphMQPthxikWLLz8kHRlUJDnR/5ZXaIqZWccaMugGi9sJqCwAGIPBG0ZCDEZVOT5PfNfv28Ot764hOfLdWccaMugGo8zAZkXiNdp2l8ygPtmarhvpoarBnK4aWMBm3NiuZayDKrxgGiZgM0ZgL2Y5U8pL+g1/wNzNdy4fx5fmiijKiVpGVTjmfUSiJAJaL8H0LZOGLQzbdNMzgQkwwt7w68mgW9OVfCXhxcwo6/wKMmgGs+s50xA5gXgyZArB4D5+T63pONj44sYrxikZFCNZ9ZzJiDzAvJEvhdGZTEw0vr5TtQM/PXhRXxh+zpsCxEzSF0u6jyznjMBmReCVzx/d2Ck0+c7bwCfOrqEOT3YbkNdLuo8sz7eTMBwjxuZHREsf7J4PRe8EbkNZ/tGen2+x6o6bjm2hLrPYwB1uajzzHrnzyPUi3kwV/9CHQBGR68UWWEUWP7k8daNfgDFCy+HlrO/6tHa/BzcH1+s49unqp27B9pyUeeZ9fGGgzSf+wkcCtqaCahF7kya5EoKr3jxKIoXjwIADMMAlk6jNnEE1RefR/3EQaBW9r2zfeNUGdcO5zCUcf47dbmo88z6rmQCSiBgLDjHgqWPJ4QA+tejp389era/GtArqB54HKWnfgJp6B0/30Vd4uuTZXxsU7G9e6AtF3WeWd+VTMAmijMBmdfOy597CQauuxlavtfX5/uD6SqOV1svQ6nLlQTeamQC+joAcCagejytpx/r3vJhwMdrqTqAH85UVnCgL1cSeFZgRPkF2vM9OBOQed480TeI3p1X+MI8MFtv7KTJkCtJvBjk50xA5oXjFS66AtAyHVEnagaOVPXEyUWdF4P8nAnIvAg8IZAd3ugL+fRSPVFyUedBiyw/ZwIyLzovu2FbR6QGiSMV3fIzbbmSwONMQEcc81ablxnyngE0l6qm6s2f6cuVBF6YxpmAzIudJ3r6XP9mXacuN9aFkiBXGnlhMgHtM4DYY8HWeudlXnRe69eFWsptV6hCoyODarywmYBZC8BJ/gpnAjJPX5hp+53TE2oDGRoyqMbjTEDmdZVnTB9v+dnt8dRN2eDXrdTlos4DomUCNmcA9uIay8+8ZqufOrpS7vF46rmFzs8LwFZLWS7qPLNeAhEyAe33ACTijgXjTMBE84zqAoz5abPcQ34NwK5e/wcA6nJR55n1nAnIvC7zlvbeCQlv+QHgwmLG9ZXgtu6BtlzUeWY9ZwIyr8u86uFnUXvpN74+39GhvL/ugbZc1HlmfXyZgFmAMwGZ196qB5/CwqN3+vp8BzMarhnMde4eaMtFnWfWx5sJGDgRyNIRAZY/dTxj9iTm/+8u6FPHfB/c/2ykgF7R6VkC2nJR55n1rpfZoTMBQx0ARkevFFNVo2ANhGT5k8UzZidRPfZryHoJenkJxvwU9JkpoFbydc3fbNt6BN7WYfpPXS7qPLM+9nAQAUByJqBiPKM0j/mffg36/ClXZJCd7eaNBXjd+6MuF3WeWc+ZgMyLg1erYuaHtwH1iisyyM72pxt6cGm/+7U/dbmo88x6zgRkXky8+Ue/F5v8Vw3k8N4NBffugbZcSeCtRiagrxkAZwKmg1d78YDr34LIv6s3g09u6XX99JMgVxJ4VmBE+QVM+ZsoAObqX8cDgGcmoBZi9ZCIDEry9Jrjr4PIf81QDh/fXETe5Z9KilxJ4sUgf2EZ00A2MwGzPoo9MgEDHgAoycA8szyA/DdtLOCP1/fwmX8VeTHIX7Sgmv/lTEDlefAv/4W9WXxxez/ew/KvKg9aZPk7ZgJmXYo1cCZgennwJ/+mvIYPjhTxuwM5z90wiXIlgRdDJiBghoI0/xnOBFSeh87yXz6Qw9WDOezuzyHb4Z9IqlxJ4IVpnAnIPM/WSf5+oeEzW3v9dQ/JlSuNPM4EZJ4nz8+03+cbveRlUI3HmYDM68iL66ES6jKoxuNMQOYF4rH86eEBnAnIvAA8lj89PLNeApwJyDw/PJY/PTyznjMBmReAx/Kng2fWcyYg84LyQjTqMqjGM+vjywQUAGcCMs8FB9oyqMYz6zkTkHmrwKMug2o8s54zAZm3CjzqMqjGM+u7kwkY+IHj1kzA6J2hLoNyPNCWQTWeWd+VTEAAASLBGsUcC5ZmHsydjaoMqvHM+q5kAi4DOBOQeSvlrW+jk5JBRR5nAjJvdXhoP9NQk0FFnhUYUX7OBPTddB36S79G9djz0GcnoFdKgF6HFAJaJg+tbwD59ecgf/5rIfL9nXnUxwuWnzovBvk5E7BTq08cQOmpMejTLwJyZVWlbePPn0L9xCEsPfsgtEIfclt2oLDzcmQH1idqvMvlDrsWZRlU48Ugv2cmYNajWINHJuCFb3hHwNHRlMGYncT8w3dAn50IfMNFlhdRPfgkqgefQvaMs9D3+nch0ztAerzW5jZeqjKoxoMWWf5msotVfs4EBADU65h7+Fuov/Qb+A3L8OgQ6lNHMHvX55A/6wL0X3YDIHVa47W1OO8uJ1GuJPA4E9ARF51nzJ/G7P23Q1ZLjY0dlwwS1aPPYmbyEIauvgnoKZIYr72x/MnghWlBMwGFrbhtnbBRHFJ+kMsErL/0AmZ+dFsX5McyD+VFzP74C5Dz02s+Xqf+sfzp5IXJBLQfZpxiwcIHgkKSkr96/HnM7/mGOT1Hd+RvVst6FTP33Q59fo6G/JEvc2w40JZBNV7YTEBhAcQeCNoykLWe9s9OYvF/vrW8wbspv5U3N/ZlGNXyqo/Xicfyp5MXJRNQAK6ZgKkJBDXqZcz+5MuQjeW91ZIfMGcCc/d+sbX/XR5vJx7Lnx4eEC0TsDkDsBenKhB0/sH/gKxVHPvXTfmbzVicQenXP1u18XrxWP708Mx6CXAmoHurTY5DP3XMvX8Om746UMD8OcMobViH2roeGDnz5alMuYae0yWsO3Ia/UdnoEnD98Gk9KuHUNhxGbRs3vHvLD/zgrY4YsHsB4DUZQIu7v0uIP3JXx0o4ORl52D+7CGXf6eIpc0DmNk5gt6JBWx5aD96ZkquvNYtW8fSE/ei79LruzpeL55sWRkKgANtGVTjmfWcCdixVcefhLE056t/i2cO4ejVO2DkM55MTUpk6joqw0UcuXYnzv7x88ifXvI13srBJ9D729dCE5bjLmcCMi9g40xAn630zB5f/asMF3H0Gv/yNz9NPZ/FkTefh8pAwef4DFTHn+7aeDkZKN08sz7eTMBwjxuZHRGU5TcqSzAWpn3176XLXw4jG0z+xkZAdaCAo9ecD5n1tykr+x/rynhZ/nTzzHpn32SETMBQfTEzAQdG6xL32Tvj1vWwgwvbNPi7Qbe0aR3Gr7/Im+Uiv57NQDY24RlPHsfIY0f8dg6aRMzj9bP9/E30BjMaNIf/b+QnJEPwNucyuHooi7cP9yCnrYwibln3LtTw39MVHCjr0OXajdfaZvUVhtfnq0nxxmd/fufP/XKtmYCBQ0FbMwG1ts64b2LvjeU8uHBXJkEOJnPnrvdm+ZAfAKYv2owzfnkcoqqjU9Pkao03HG9ON8j0b1av4/kTdTwwW8Nnt/WhKLTY5f/SRAl3TFVIjDcYL3izZAJKYK0zAWMeXBheaWSdO8un/ABg5ATmzx4mP96k8p4t6bjtRDl2+ffMVV3kT9f2A2LOBNTqsofS4MLyqoPON/CCyN9spRHvhCAK400y7/7ZCmbq1mlx9Gv0700nX34Bo+NdaLdMQF8HAKczf02IrUncWPamO9z5DyM/ANR7865/ozLeJPOkBA5Umi9yxXOD7oWSQXa8fnl1qW3zYjX8ted7YGxsT+cDgFsmoCFFpVMtxY1lbTLT/pRiWPkBuC4jUhlvGnh75+uxya8DqElJerx+eDJj7HT7myUTsAXZzAT0PAB4ZQJmNDmexI1lbaUNrVP2KPIDQHl9X9uCB6XxpoG3MS9iW5pb1JMvPwDkDe0hp99b/LUjl+9Uux4AOmUCGhAB33GlsbGs7dSrNq+wIsoPAPViDjM7RsiONw28ihHq4XLHpcMTNUl+vL4uYyFO23/nNnOHLRPQ8QAQeyYgoY3VbFOXbMX8tpeZrBjkb7YTu8/B0sZ15MabFt5zS52XWe3N7bmB35SDs5Kw/Sz37Owz97XIBARkT6ZtBdSIsLEEZCiezGgor+/D9K4tWNg6CCBe+QFAZgWOX3MehvadxMCBU8gvVAEp12S89pap1BvD897ZgpKdeEDwdGHpwWv+5umlOk7rEsMZf3Svh4YemqsFGGP84+3EC9OCZgJmbcVt64SN4tCxYHOvPAMnXr+9ZUuGlStuWbvFk0LD6Z2bcHrnJlL9O+/fH0O2Uuso/y//2R/PkEC5KtuePi7kNYgQ++/o3wGTs94HJx3At09V8MGRzu9feMn/XEnHMz5nEz+/FRgoxD/eTrxb7gC+/2iA7UcxE1Br/QUZGVTkiRinmd2Q4c2v8te/b5+qYF/JW14v+StS4rMvLvnq19b1ayN/0JaATEBaMijJszRq8perEu+/ChCZzv2rS+ATRxZxoOy8a3rJv6RL/M2RJRys+NutP3QNffkTkAlIUAaFeRTllxIo5IEbLvXXv9O6xIfG5/HNqQrKttQjJ/l7hMAj83V84NACHlus++rb5iHgra+hLT8QLROweQ/AXlyLMxmIsgyq8ajK32wfuw744RMalnw8ZlYxgC9NlPFfUxW8YSCHi4oZbMwL9AvzzFYyJCbqEvtLOh5eqON4Ndj57NYb6ctPPhPQEIKsDMrxQFt+TQOKPRo+fj3w6e/4Zy0YEvfOVHHfTHz3OHadA+zcQl9+W2ngpXr7TcAuZAKGYCVRrgTwwi5FrvY18DsvAy7bEXDMMe5/fQXgX9+XfvkBgpmASZUrCbwwba1ugP3bTcBbbwWOT/sYc4z7X1YAX/2QhPW9LvrypyQTMMlypZG3lne/hQDu+Lh5NvYcc8xP5N36HoltG1Z/vH5bajMBqcugGo/C0tdAAfjxp4BNgy5jjnH/y2WAf3mfxBst79UlQf6omYCBI8EahWKqahQs2Qwsf4p4FORvtqF+4N6/BT5wO/CL/dbhxSf/YC/w9T+X2DS89uN1a11IBhLwGwhiK7ZkAkbvDHUZVOMBdORvNiGAr30Y+MjvmWfquGTQNOANO4EffEI5+ZdvCAWaAcSdCUhdBtV4Zjkt+a3t/aPAO39H4jPfAx58BpAy3P6nAXjFZuAfbwQ2D9Mdr9nXrmQCNlH+DwAsf7p5Znnrp0lJhiYvnwM+80fA1FuB2+4B9j6vYdFnNlVWABecBXzkWuC1r6A307HzdD12+fPLmAbS1wHA+UUDzWD508Ezy+nLb+VtGAD+6U9M3sGTwN2PAc8cAU7OAaWKWdOTBdavA165GXjTxcDuHeblBKV7HF48a4sov4ApfxMFwFz963gAcEsWqRuiDC346iF1GVTjmeXJkt/OO3cj8NHr6PYvKi8G+QuwnfkjZwKGWXqgLoNqPLO8fZpJWQbVeDHI351MwKCdoS6Dajyz3Pkak6oMqvGAyPLTyASkLoNqPLOcdjgI84CMz9gzeyOXCUhZBtV4ZjnLnwRemEYuE1AYBlkZVOOZ5Sx/WnlhMgHtMwCOBUsxj3omIPNWPxMwawE4yc+xYGniWRrLnx5elEzALOCaCViNKxyEpAwK81j+9PAAzgRkXgAey58eHgDOBGReAB5Y/rTwAIeZNmcCMs+Ll5RMQOZ1bpwJyLzAvDCNugyq8QAn+TkTkHld4FGXQTUe4OxblEzAUJFgjY4IsPyJ4mnS/3Geugyq8QCvky1nAjLPbdovgYHxaQzsn4So+vs2XOoyqMYD4p1pWzMBAx8AWjMBtcidSbJcpHkZgYED0xh57DBy8z4jcxqNsgyq8YCuyJ9B0EiwRjHHgiWAlz9VwsZHxlGcWAjOJJwJqBoP6Ir8nAmYWh4khn41gZHHjgTmmd1JdjJQ2nicCcg83zzNMDCy9wgG908G5pndaXyaje5Qk0FFnrVFlJ8zAdPME7qBLT95Ab0n5gPzzO6s7Fo9OZoyqMyLQX7OBEwtD8DIw+OxyA8Al+6gLYNqvBjk50zANPOGnzmBgYOnAvPM8tZdq9gD/MO76cqgGg/gTEDmefAKLy1gw+NHA/PM8tZda+sZwF2f1NBXDM5KolxJ4HEmoENLqqyxv9gjBDY+Mh6MBaC/CJy7UWLremB9n/n121dcAJx/Fm0ZVOSFaZwJqAhv6LmT6Jkp+WbtOge45V3AmYS/C4950XicCagIT6sZGHn8mC+O0IC/fzdw7Wto77zM64r8nAmYRt7w/klkyrXOHAD/dCPwplfR3nmZF43HmYCK8QZf8Pewz+vPZ/nTzgM4E1ApXqZcR3FysTML5tSf8s7LvHjeFeBMQIV4vSfm0LZY7NC2ngEU8nR3XubF/6IQOBMw/bzCqSVfzF1n0915mUdDfoAzARPHyy12frdfg8R5Wyw/E9p5mdcN+TkTUBleplL3Zja2/qbhxs+Edl7mxS+/BGcCqsXz+JitO4cArZ2Xed2RnzMBFeMZOed4b/vOMbNEZ+dlXjflD96smYAiRLElEzB6ZyjJlQRevS/XznTYOQ5N0th5mUdS/uWzSKADAMeCrT2vMtz6up7bzvHLg4G7R14G1XhAV+RvedfH9wGA5afBK42ss5S77xz7XgSMAFeG1GVQkdelTMAWpK8DAGcC0uFVBguo9fd0PDPUDeD2+/wxkyCDijxriyi/QHu+B8bG9nQ+AHhmAoZolOVKBA/AwvZhX2eGrzwAnJzx5iVFBpV5Mcjf9q4AZwImmDe7Y4O5l8F756jrwB98Fjjt8vUASZRBNV4M8nMmYNp41XUFzJy3wdfOMbMEXP1p4Lv/2/r7JMqgGg/ofiZg1qVYA2cCkuZNvvpM9B+c9vV9f9U68OnvAJ+7G3jdDuDKncDOsyVGBoF84xRAXQYVeTFkAgIrj45JcCZgenjVdQVM/tZWbHz0sG/WYhl44GngwadXzisagN4C8Idv0PAX1wbuXmLlSgIvTAuaCShsxW3rhPCZLOLWOBOwe7zpXZuxeOZgMKZtUmkAmC9r+MoY8N7PB+tfkuVKIy9MJqD9HoBTLFjoQFBOBuouTwoNx960A9WBgj9mh6XDJw8CX/2pv/5Rl0E1XthMQGEBcCBoAnl6IYujbzkfRj7jzfT5RNl/PtS5f9RlUI0XJRNQAK6ZgBwImhBeZaiIQ2/fhVp/jzMzwOOk0x2+UZy6DKrxgGiZgM0ZgL04tkBQiWTLlRReZbiIgzdcjKVN61qZMT5LTl0G1XgAImcC2u8BtK0TBu2MfWfjTMDV4+mFLA5fdwGmXr0FMqOx/CnmAQ4zbc4EZJ4UApOvPRuHbtiF+e0vW/k9WP608IB45Ac4EzC1vHpfD1684hU4fdEChp6bQN+R0xC1zh+x/V+kLoNqPMBJ/vCZgFmAMwHTzCud0Y+FqwYBQ2LnVx8NxKMug2o8wNm3KJmAgROBLB0RLH9yeDIjoPf4T4CjLoNqPMD9ZBvmxTyAMwGZ59Koy6AaD4h3ps2ZgMzzbJRlUI0HdEV+zgRkngsTdGVQjQd0RX7OBGSeC9P2aVKSQUXeamQC+roHwJmA6eaZ5Sw/NZ61RZRfwJS/iQLAmYDMWy5n+SnzYpCfMwGZ58J0uMakLINqvBjk50xA5rkwXW4wUZVBNR7Q/UxA4VKsgTMBU8szy/lFIeq8GDIB7TN3zgRUnWeWs/xJ4IVpQTMBs7bitnVCRIwF40xAOjyznOVPKy9MJqB9BsCxYCnmCZY/tbywmYBZC8BJfo4FSxPP0lj+9PCiZAJmAddMwNhiwUjKoDCP5U8PD4iWCdicAdiLa5wJmE4ey58eHoDImYD2ewASMceCcSYgIR5Y/rTwAIeZNmcCMs+LZ7D8qeAB8cgPcCagUrwwjboMqvEAJ/nDZwIKgDMBmefcqMugGg9w9i1KJmCoSLBGRwRY/tTyqMugGg/wOtlyJiDzWP7U8oB4Z9qcCcg8z0ZZBtV4QFfk50xA5rkwOROQDA/oivycCcg8FyYnA5HicSYg81aFZ5az/NR41hZRfs4EZJ4Hk+UnzYtBfs4EZJ4LkzMBSfNikJ8zAZnnwuRMQNI8oPuZgFmXYg0xZQIO7ZsAYCYD2WGGCP3dpMwLwctU6sv/2+vu8i13BO+frrc/TBo20455ZrvrF5Hk72/82PRVYq0yAYf3nYztbiYQ79II89p53w/2LeKJH2+aeOQyASlvLOYxL0088pmAlDYW85iXJh75TEBKG4t5zEsTL0omoABcMwE95dczK0sJSdpYzGNe2ngia7Q94QefN+ybt5HtxR0DQfM1HEjixmIe89LGKxr1cRvS92qdfR2pbZ3QrT29984JAPckbWMxj3mp4mm4f11+adKCXL1MQF0zbgYwkZiNxTzmpYs3mRO1v7IgAz+n0zwAyLGxPYEDQff97O5DUtN3C03en4CNxTzmpYen4f5cpja6Pls6jChP6IbuBVqXHuarvRtKIrNdGJpWN0Q51LsCkML8kgPrS0qawbz4eQJGoS61bQCQ1eVhI9v+cleaxpsWnsga+aJRH48y7W9lhmweDx2E6gzzmMe81eM1mOHeIqE+OOYxj3mePA3RMwHJDo55zGOeO09DnJmAxAbHPOYxz53X9q5PpExAYoNjHvOY587TEDETsNfSCSDCK8LMYx7zVp3nmAnY8SagR6xQqFeEmcc85q06r4Dm4wfmgcQYG9tTBzp8NZiluNmJ5n9DvSLMPOYxb014mo23/CJf1qO4ec0gbcWOySI+OsM85jFv7Xkt7/poHYoDvyXIPOYxLzk8zaXYKRbM11uCzGMe85LD0xyKnZKBAr8oxDzmMY8+z34PQKD1mgHNbxAJ2ZjHPOYR5i0fKRpHj5YjR5ijEPOYx7zk8P4fRuxh6fED9HIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDUtMzBUMTc6MjQ6MDQtMDU6MDAKGWZYAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA1LTMwVDE3OjI0OjA0LTA1OjAwe0Te5AAAAABJRU5ErkJggg==\"","export const Language = {\r\n  EN: Symbol('English'),\r\n  ZH: Symbol('繁體中文')\r\n};\r\n\r\nconst DEFAULT_LANG = (lang =>\r\n  lang.substring(0, lang.indexOf('-') > 0 ? lang.indexOf('-') : undefined)\r\n)(localStorage.getItem('CASH_MAP_LANG') || navigator.language.toLowerCase());\r\n\r\nexport default DEFAULT_LANG;\r\n","import { Language } from './type';\r\n\r\nexport const StateStore = (state, { locale, messages } = state) => ({ locale, messages });\r\n\r\nexport const ActionStore = (state, action) => {\r\n  getI18n(action).then(intl => state.dispatch(intl));\r\n\r\n  return state;\r\n};\r\n\r\nexport default function getI18n(lang) {\r\n  switch (lang) {\r\n    case Language.ZH:\r\n      return import('../../assets/i18n/zh.json').then(({ default: messages }) => ({\r\n        locale: 'zh',\r\n        messages\r\n      }));\r\n\r\n    default:\r\n      return import('../../assets/i18n/en.json').then(({ default: messages }) => ({\r\n        locale: 'en',\r\n        messages\r\n      }));\r\n  }\r\n};\r\n","import React, { createContext, useReducer, useContext, useCallback } from 'react';\r\nimport { IntlProvider } from 'react-intl';\r\n\r\nimport DEFAULT_LANG, { Language } from './type';\r\nimport getI18n, { StateStore, ActionStore } from './reducer';\r\n\r\n\r\n// TODO: Custom Functions\r\nexport const useI18n = () => useContext(Context);\r\n\r\n// TODO: Components\r\nconst Context = createContext({\r\n  locale: DEFAULT_LANG,\r\n  get: () => '',\r\n  set: () => {}\r\n});\r\n\r\nexport default function I18n({ children }) {\r\n  const [{ locale, messages }, $dispatch] = useReducer(StateStore, { locale: 'en', messages: {}});\r\n  const getMessage = useCallback(code => !code ? null : (code in messages) ? messages[ code ] : code, [ messages ]);\r\n\r\n  const dispatch = useReducer(ActionStore, { dispatch: $dispatch }, () =>\r\n    getI18n(Language[DEFAULT_LANG.toUpperCase()]).then(intl => $dispatch(intl))\r\n  );\r\n\r\n  return (\r\n    <Context.Provider value={{ locale, messages, set: dispatch[1], get: getMessage }}>\r\n      <IntlProvider {...{ locale, messages }}>\r\n        { children }\r\n      </IntlProvider>\r\n    </Context.Provider>\r\n  );\r\n};\r\n","import Firebase from 'firebase/app';\r\nimport uuidv4 from 'uuid';\r\n\r\nimport 'firebase/database';\r\n\r\nimport {\r\n  FIREBASE_OPTIONS,\r\n  DECODE_NAME,\r\n  DECODE_COUNT,\r\n\r\n  STORAGE_USER_ID,\r\n  STORAGE_GAME_ID\r\n} from '../../assets/config/api.json';\r\n\r\n\r\n// TODO: Export Class\r\nfunction connectWebsocket(gameRoom, fn) {\r\n  gameRoom.on('child_changed', snapshot => {\r\n    if ('competitor' === snapshot.key && snapshot.val() !== GameRoom.userID)\r\n      fn({ gameID: gameRoom.key, type: 'competitor', value: snapshot.val() });\r\n  });\r\n\r\n  gameRoom.child('msg').on('child_added', snapshot =>\r\n    fn({ gameID: gameRoom.key, type: 'msg', value: snapshot.val() })\r\n  );\r\n\r\n  gameRoom.child('rounds').on('child_added', snapshot =>\r\n    fn({ gameID: gameRoom.key, type: 'rounds', value: snapshot.val() })\r\n  );\r\n\r\n  gameRoom.child('attacks').on('child_added', snapshot =>\r\n    snapshot.val().launcher === GameRoom.userID ? null : fn({\r\n      gameID : gameRoom.key,\r\n      type   : 'attacks',\r\n      value  : snapshot.val()\r\n    })\r\n  );\r\n}\r\n\r\nclass GameRoom {\r\n  static database = Firebase.initializeApp(JSON.parse((function generate(opts, count) {\r\n    return count > 0 ? generate(window[DECODE_NAME](opts), --count) : opts;\r\n  })(FIREBASE_OPTIONS, DECODE_COUNT))).database();\r\n\r\n  static userID = (() => {\r\n    if (!localStorage.getItem(STORAGE_USER_ID))\r\n      localStorage.setItem(STORAGE_USER_ID, uuidv4());\r\n\r\n    return localStorage.getItem(STORAGE_USER_ID);\r\n  })();\r\n\r\n  static uid = localStorage.getItem(STORAGE_GAME_ID);\r\n\r\n  ref = null;\r\n\r\n  constructor() {\r\n    GameRoom.database.ref('GameRoom').child(GameRoom.uid).once('value',\r\n      snapshot => !snapshot.exists() ? null : snapshot.ref.remove()\r\n    );\r\n  }\r\n\r\n  get uid() { return (this.ref || {}).key || ''; }\r\n\r\n  get snapshot() { return new Promise(resolve => this.ref.once('value', snapshot => resolve(snapshot))); }\r\n\r\n  create(websocketFn) {\r\n    return GameRoom.database.ref('GameRoom')\r\n      .push({ owner: GameRoom.userID, status: 'WAITING', competitor: '' })\r\n      .then(newGame => {\r\n        this.ref = newGame;\r\n        localStorage.setItem(STORAGE_GAME_ID, newGame.key);\r\n        connectWebsocket(newGame, websocketFn);\r\n\r\n        return {\r\n          status   : 200,\r\n          content  : {\r\n            gameID : newGame.key,\r\n            userID : GameRoom.userID,\r\n            status : 'WAITING',\r\n            owner  : GameRoom.userID\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  search(uid) {\r\n    return new Promise((resolve, reject) => GameRoom.database.ref('GameRoom').child(uid).once('value', snapshot => {\r\n      const { owner, competitor, status } = snapshot.val() || {};\r\n\r\n      if (!snapshot.exists() || !owner)\r\n        return reject('MSG_INVALID_GAME_ID');\r\n      else if (owner === GameRoom.userID || !!competitor || 'WAITING' !== status)\r\n        return reject('MSG_UNALLOWED_VISIT');\r\n\r\n      resolve(snapshot);\r\n    }));\r\n  }\r\n\r\n  join(uid, websocketFn) {\r\n    let values;\r\n\r\n    return this.search(uid).then(snapshot => {\r\n      values   = snapshot.val();\r\n      this.ref = snapshot.ref;\r\n\r\n      localStorage.setItem(STORAGE_GAME_ID, snapshot.key);\r\n      connectWebsocket(snapshot.ref, websocketFn);\r\n\r\n      return snapshot;\r\n    }).then(snapshot => snapshot.ref.update({\r\n      ...snapshot.val(),\r\n      status     : 'PLAYING',\r\n      competitor : GameRoom.userID\r\n    })).then(() => this.ref.child('rounds').push({\r\n      caller: values.owner\r\n    })).then(() => new Promise(resolve => this.ref.once('value', snapshot => resolve({\r\n      status  : 200,\r\n      content : { ...snapshot.val(), rounds: undefined }\r\n    }))));\r\n  }\r\n}\r\n\r\n\r\n// TODO: Export Methods\r\nexport default (bingo => ({\r\n\r\n  doSearch : key => bingo.search(key)\r\n    .then(() => ({ status: 200, content: true }))\r\n    .catch(err => ({ status: 500, content: err })),\r\n\r\n  doCreate : websocketFn => bingo.create(websocketFn).catch(err => ({ status: 500, content: err })),\r\n\r\n  doJoin   : (key, websocketFn) => bingo.join(key, websocketFn).catch(err => ({ status: 500, content: err })),\r\n\r\n  doSay    : msg => bingo.ref.child('msg')\r\n    .push({ sender: GameRoom.userID, msg })\r\n    .then(() => ({ status: 200, content: true }))\r\n    .catch(err => ({ status: 500, content: err })),\r\n\r\n  doAttack : (attack, dispatch) => bingo.ref.child('attacks')\r\n    .push({ ...attack, launcher: GameRoom.userID })\r\n    .then(newAttack => new Promise(resolve => bingo.ref.child('attacks').once('child_changed', snapshot => {\r\n      if (newAttack.key === snapshot.key) {\r\n        const { isReflection = false, type, description, ranges } = snapshot.val();\r\n  \r\n        if (!isReflection)\r\n          dispatch({ step: 4 });\r\n        else dispatch({\r\n          step    : 4,\r\n          effects : { type, description, ranges, ignoreMirror: true }\r\n        });\r\n        resolve({ status: 200, content: true });\r\n      }\r\n    })))\r\n    .catch(err => ({ status: 500, content: err })),\r\n\r\n  doReflection : isValidAttack => bingo.ref.child('attacks').once('value', snapshot => {\r\n    const attackIDs = Object.keys(snapshot.val());\r\n    const lastID = attackIDs[attackIDs.length - 1];\r\n\r\n    snapshot.ref.child(lastID).update({\r\n      ...snapshot.val()[lastID],\r\n      isReflection: !isValidAttack\r\n    });\r\n  })\r\n}))(new GameRoom());\r\n","import { useMemo } from 'react';\r\nimport CamelCase from 'camelcase';\r\nimport GameBase from './firebase';\r\n\r\nimport { CARDS } from '../../assets/config/chance-cards.json';\r\n\r\nimport build_number from '../../assets/imgs/build-number.png';\r\nimport attack_bomb from '../../assets/imgs/attack-bomb.png';\r\nimport attack_fog from '../../assets/imgs/attack-fog.png';\r\nimport attack_lock from '../../assets/imgs/attack-lock.png';\r\nimport defense_bomb from '../../assets/imgs/defense-bomb.png';\r\nimport defense_fog from '../../assets/imgs/defense-fog.png';\r\nimport defense_lock from '../../assets/imgs/defense-lock.png';\r\nimport defense_mirror from '../../assets/imgs/defense-mirror.png';\r\n\r\n\r\nfunction emptyFn() {};\r\n\r\nconst imgs = {\r\n  build_number ,\r\n  defense_bomb , attack_bomb ,\r\n  defense_fog  , attack_fog  ,\r\n  defense_lock , attack_lock ,\r\n  defense_mirror\r\n};\r\n\r\nconst getZIndex = (x, y) => Math.floor(x / 3) % 3 + Math.floor(y / 3) * 3;\r\n\r\nconst getNumbers = () => {\r\n  const nums = [];\r\n\r\n  while (nums.length < 81) nums.push(nums.length + 1);\r\n\r\n  return nums\r\n    .sort(() => Math.floor(Math.random() * 12) % 3 - 2)\r\n    .map((number, i) => ({ number, zone: Math.floor(i / 9) }))\r\n    .reduce((result, { number, zone }) => {\r\n      const numbers = (result[ zone ] || { numbers: []}).numbers;\r\n\r\n      return {\r\n        ...result,\r\n        [ zone ]   : {\r\n          bgClass  : `zone-bg-${ zone + 1 }`,\r\n          numbers  : [ ...numbers, {\r\n            number,\r\n            x: parseFloat(zone) % 3 * 3 + numbers.length % 3,\r\n            y: Math.floor(parseFloat(zone) / 3) * 3 + Math.floor(numbers.length / 3)\r\n          }]\r\n        }\r\n      };\r\n    }, {});\r\n};\r\n\r\nconst getEffects = (effects = {}, { type, description, ignoreMirror = false }) => {\r\n  const { built = false, stong = false, mirror = false } = effects;\r\n  const isAttack  = 'ATTACK' === type;\r\n  const validAtt  = ignoreMirror || !mirror;\r\n  const newMirror = isAttack && !ignoreMirror ? false : mirror;\r\n\r\n  if (isAttack && !ignoreMirror) GameBase.doReflection(isAttack && validAtt);\r\n\r\n  switch (description) {\r\n    case 'MIRROR' : return { ...effects, mirror: 'DEFENSE' === type };\r\n    case 'LOCK'   : return { ...effects, mirror: newMirror, occupied: isAttack && !built && validAtt };\r\n    case 'FOG'    : return { ...effects, mirror: newMirror, fog: isAttack && validAtt };\r\n    case 'BOMB'   : return {\r\n      ...effects,\r\n      mirror : newMirror,\r\n      built  : isAttack && !stong && validAtt ? false : built,\r\n      stong  : 'DEFENSE' === type && built\r\n    };\r\n    default       : return { ...effects, built: 'BUILD' === type };\r\n  }\r\n};\r\n\r\nconst getCards = () => CARDS.map(card => Object.keys(card).reduce(\r\n  (ccResult, name) => ({ ...ccResult, [ CamelCase(name) ]: card[name] }), {}\r\n));\r\n\r\nconst getRoundCard = (function() {\r\n  const cards = getCards().reduce((list, { description, type, rangeX, rangeY, count }) => {\r\n    const i = list.length + count;\r\n\r\n    while (list.length < i) list.splice(Math.ceil(Math.random() * list.length), 0, {\r\n      description, type, rangeX, rangeY\r\n    });\r\n    return list;\r\n  }, [])\r\n  .sort(() => Math.floor(Math.random() * 12) % 3 - 2)\r\n  .reverse()\r\n  .sort(() => Math.floor(Math.random() * 12) % 3 - 2);\r\n\r\n  console.log(cards[0]);\r\n\r\n  return i => cards[i];\r\n})();\r\n\r\n\r\n// TODO: Export Functions\r\nexport default {\r\n\r\n  getAction: params => 'object' === typeof params ? params : { action: params },\r\n\r\n  getRounds: ({ userID = '', rounds }, newRound, step) => {\r\n    const isMyTurn = (newRound || rounds[rounds.length - 1] || {}).caller === userID;\r\n  \r\n    if (newRound) return [ ...rounds, !isMyTurn ? newRound : {\r\n      ...newRound,\r\n      step: 1,\r\n      card: getRoundCard(Math.floor(rounds.length / 2))\r\n    }];\r\n    return !isMyTurn || (!step && step !== 0) ? rounds : [ ...rounds.slice(0, rounds.length - 1), {\r\n      ...rounds[ rounds.length - 1 ],\r\n      step\r\n    }]\r\n  },\r\n\r\n  getNumbers: (status, zones, effect) => 'PLAYING' === status && Object.keys(zones).length === 0 ? getNumbers()\r\n    : !effect ? zones : (({ ranges, type, description, ignoreMirror = false }) => ranges.reduce((newZones, { x, y, z }) => {\r\n      const { bgClass, numbers } = newZones[z];\r\n\r\n      return {\r\n        ...newZones,\r\n        [z]: {\r\n          bgClass,\r\n          numbers: numbers.map(land => land.x !== x || land.y !== y ? land : {\r\n            ...land,\r\n            effects: getEffects(land.effects, { type, description, ignoreMirror })\r\n          })\r\n        }\r\n      };\r\n    }, zones))(effect),\r\n\r\n  getCards,\r\n\r\n  getCardImage: ({ type, description }) => imgs[`${ type.toLowerCase() }_${ description.toLowerCase() }`],\r\n\r\n  getCardParams: ({ target, x, y, z, card: { type, description }}) => {\r\n    switch (target) {\r\n      case 'zone'   : return { type, description, ranges: [{ z }] };\r\n      case 'cell'   : return { type, description, ranges: [{ x, y, z }] };\r\n      case 'line-x' : return { type, description, ranges: (ranges => {\r\n        while (ranges.length < 9) ranges.push({ x, y: ranges.length, z: getZIndex(x, ranges.length) });\r\n        return ranges;\r\n      })([]) };\r\n      case 'line-y' : return { type, description, ranges: (ranges => {\r\n        while (ranges.length < 9) ranges.push({ y, x: ranges.length, z: getZIndex(ranges.length, y) });\r\n        return ranges;\r\n      })([]) };\r\n      default:\r\n        throw new Error('Error target type, it must be \"cell\" / \"line-x\" / \"line-y\" / \"zone\".');\r\n    }\r\n  },\r\n\r\n  doWebsocket: dispatch => ({ gameID, type, value }) => dispatch({\r\n    [ 'rounds' === type ? 'round' : 'attacks' === type ? 'effect' : type ]: value,\r\n    gameID,\r\n    ...('competitor' === type ? { status: 'PLAYING' } : {})\r\n  }),\r\n\r\n  doResponse: ({ dispatch }, { onSuccess = emptyFn, onFail = emptyFn }, params) => ({ status, content }) => {\r\n    if (status !== 200)\r\n      onFail(params || content)\r\n    else {\r\n      dispatch(params || content);\r\n      onSuccess(params || content);\r\n    }\r\n  },\r\n\r\n  useCardRange: (card = {}) => useMemo(() => card.rangeX === 1 && card.rangeY === 1 ? 'cell'\r\n    : card.rangeX === 9 && card.rangeY === 1 ? 'line-y'\r\n      : card.rangeX === 1 && card.rangeY === 9 ? 'line-x' : 'zone', [ card ])\r\n}","import GameBase from './firebase';\r\nimport ServiceFn from './service.fn';\r\n\r\n\r\n// TODO: Reducers\r\nexport function StateReducer(state, {\r\n  gameID     = state.gameID     , status ,\r\n  userID     = state.userID     , msg    ,\r\n  owner      = state.owner      , round  ,\r\n  competitor = state.competitor , step   ,\r\n  zones      = state.zones      , effect\r\n}) {\r\n  const rounds = ServiceFn.getRounds(state, round, step);\r\n\r\n  return {\r\n    gameID , userID     ,\r\n    owner  , competitor ,\r\n    rounds , \r\n\r\n    msg    : msg ? [ ...state.msg, msg ] : state.msg,\r\n    status : status || state.status,\r\n    zones  : ServiceFn.getNumbers(status, zones, effect)\r\n  };\r\n};\r\n\r\nexport function ActionReducer(state, params) {\r\n  const { dispatch } = state;\r\n  const { action, gameID, msg, step, onSuccess = () => {} } = ServiceFn.getAction(params);\r\n\r\n  switch (action) {\r\n    case 'SEARCH_GAME':\r\n      GameBase.doSearch(gameID).then(ServiceFn.doResponse(state, params));\r\n      break;\r\n\r\n    case 'NEW_GAME':\r\n      GameBase.doCreate(ServiceFn.doWebsocket(dispatch)).then(ServiceFn.doResponse(state, params));\r\n      break;\r\n\r\n    case 'JOIN_GAME':\r\n      GameBase.doJoin(gameID, ServiceFn.doWebsocket(dispatch)).then(ServiceFn.doResponse(state, params));\r\n      break;\r\n\r\n    case 'SEND_MSG':\r\n      GameBase.doSay(msg).then(ServiceFn.doResponse(state, params, { msg }));\r\n      break;\r\n\r\n    case 'ATTACK':\r\n      GameBase.doAttack(ServiceFn.getCardParams(params), dispatch).then(ServiceFn.doResponse(state, params));\r\n      break;\r\n\r\n    case 'DEFENSE':\r\n      const defenseParams = ServiceFn.getCardParams(params);\r\n\r\n      dispatch({ step: 4, effect: defenseParams });\r\n      onSuccess(defenseParams);\r\n      \r\n      break;\r\n\r\n    case 'BUILD':\r\n      break;\r\n    default:\r\n      if ((step !== 0 && !step && isNaN(step)) || step < 0 || step > 3) throw new Error(\r\n        `The step number is wrong(${ step }).`\r\n      );\r\n      dispatch({ step });\r\n  }\r\n  return state;\r\n};\r\n","import React, { createContext, useMemo, useReducer, useContext } from 'react';\r\n\r\nimport { StateReducer, ActionReducer } from './reducer';\r\nimport ServiceFn from './service.fn';\r\n\r\n\r\n// TODO: Basic\r\nconst defaultOptions = {\r\n  gameID     : ''     , zones  : {},\r\n  status     : 'NONE' , rounds : [],\r\n  userID     : ''     , msg    : [],\r\n  owner      : ''     ,\r\n  competitor : ''\r\n};\r\n\r\n// TODO: Components\r\nconst GameContext = createContext({ ...defaultOptions, dispatch: () => {}});\r\n\r\nexport const GameCustom = {\r\n  useCardRange : ServiceFn.useCardRange,\r\n  useCardImage : ServiceFn.getCardImage,\r\n  useAllCards  : () => ServiceFn.getCards(),\r\n  useGame      : () => {\r\n    const { gameID, userID, status, zones, rounds, dispatch } = useContext(GameContext);\r\n    const round = useMemo(() => rounds[rounds.length - 1] || {}, [ rounds ]);\r\n\r\n    return { gameID, userID, status, zones, ...round, dispatch };\r\n  }\r\n};\r\n\r\nexport default function Game({ children }) {\r\n  const state  = useReducer(StateReducer, defaultOptions);\r\n  const action = useReducer(ActionReducer, { dispatch: state[1] });\r\n\r\n  return (\r\n    <GameContext.Provider value={{ ...state[0], dispatch: action[1] }}>\r\n      { children }\r\n    </GameContext.Provider>\r\n  );\r\n};\r\n","// TODO: Private Methods\r\nfunction isBreakPointOpts(options) {\r\n  return Object.keys(options).filter(prop => [ 'def', 'sm', 'md', 'lg', 'xl' ].indexOf(prop) >= 0).length > 0;\r\n}\r\n\r\nfunction toFullArrow(arrow) {\r\n  return 't' === arrow ? 'top' : 'b' === arrow ? 'bottom' : 'l' === arrow ? 'left' : 'right';\r\n};\r\n\r\nfunction getSpacingClass(kind, options) {\r\n  const cls = [];\r\n\r\n  Object.keys(options).forEach(breakpoint => {\r\n    const value = options[breakpoint];\r\n\r\n    if (value !== false) {\r\n      if ('number' === typeof value)\r\n        cls.push(getBsClass({ size: breakpoint, start: kind, end: value }));\r\n      else Object.keys(value).forEach(on => {\r\n        const $value = value[on] || '';\r\n\r\n        if ($value || $value === 0)\r\n          cls.push(getBsClass({ size: breakpoint, start: `${kind}${on}`, end: $value }));\r\n      });\r\n    }\r\n  });\r\n  return cls;\r\n}\r\n\r\nfunction getBorderClass(options) {\r\n  const cls = [];\r\n\r\n  if (options !== false) {\r\n    if (options === true)\r\n      cls.push('border');\r\n    else Object.keys(options).forEach(on =>\r\n      cls.push(`border-${ toFullArrow(on) }`)\r\n    );\r\n  }\r\n  return cls;\r\n}\r\n\r\nfunction getRoundedClass(options) {\r\n  const cls = [];\r\n\r\n  if (options !== false) {\r\n    if (options === true)\r\n      cls.push('rounded');\r\n    else Object.keys(options).forEach(prop => {\r\n      const {[ prop ]: value } = options;\r\n\r\n      if (value)\r\n        cls.push(`rounded-${value}`);\r\n    });\r\n  }\r\n  return cls;\r\n}\r\n\r\nfunction getDisplayClass(display, options) {\r\n  const cls = [`d-${options === true ? 'none' : display}`];\r\n\r\n  options = options === true ? 'def' : options;\r\n\r\n  if (options !== false) {\r\n    const hiddenOn = Array.isArray(options) ? options : [options];\r\n\r\n    ['def', 'sm', 'md', 'lg', 'xl'].filter(breakpoint =>\r\n      hiddenOn.indexOf(breakpoint) >= 0\r\n    ).forEach(breakpoint => {\r\n      cls.splice(cls.indexOf(getBsClass({ size: breakpoint, start: 'd', end: display })), 1);\r\n      cls.push(getBsClass({ size: breakpoint, start: 'd', end: 'none' }));\r\n    });\r\n  }\r\n  return cls;\r\n}\r\n\r\n\r\n// TODO: Export Functions\r\nexport const uniqueArray = arr => arr.filter((prop, i) => !!prop && arr.indexOf(prop) === i);\r\n\r\nexport const getBsClass = ({ size = '', start = '', end = '' } = {}) => [start, 'def' === size ? '' : size, end].filter(\r\n  value => value === 0 || !!value\r\n).join('-');\r\n\r\nexport const getColorClasses = ({ bg, border, text } = {}) => uniqueArray([\r\n  bg ? `bg-${ bg }` : '',\r\n  border ? `border-${ border }` : '',\r\n  text ? `text-${ text }` : ''\r\n]).join(' ');\r\n\r\nexport const getContainerClasses = (display, {\r\n  className = '',\r\n  margin    = false,\r\n  padding   = false,\r\n  border    = false,\r\n  rounded   = false,\r\n  hidden    = false,\r\n  colors    = false\r\n}) => uniqueArray([\r\n  className,\r\n  ...getSpacingClass('m', isBreakPointOpts(margin) ? margin : { def: margin }),\r\n  ...getSpacingClass('p', isBreakPointOpts(padding) ? padding : { def: padding }),\r\n  ...getBorderClass(border),\r\n  ...getRoundedClass(rounded),\r\n  ...getDisplayClass(display, hidden),\r\n  getColorClasses(!colors ? {} : colors)\r\n]).join(' ');\r\n","import PropTypes from 'prop-types';\r\n\r\n\r\n// TODO: Colors\r\nexport const BsColors = PropTypes.oneOf([\r\n  'primary',\r\n  'info',\r\n  'success',\r\n  'warning',\r\n  'danger',\r\n  'white',\r\n  'light',\r\n  'secondary',\r\n  'dark'\r\n]);\r\n\r\nexport const BsBtnColors = PropTypes.oneOf([\r\n  'primary',\r\n  'info',\r\n  'success',\r\n  'warning',\r\n  'danger',\r\n  'light',\r\n  'secondary',\r\n  'dark'\r\n]);\r\n\r\nexport const BsContainerColor = PropTypes.exact({\r\n  bg: BsColors,\r\n  border: BsColors,\r\n  text: BsColors\r\n});\r\n\r\n\r\n// TODO: Spacing\r\nconst Spacing = PropTypes.oneOf([ 0, 1, 2, 3, 4, 5 ]);\r\nconst MarginAuto = PropTypes.oneOf([ 0, 1, 2, 3, 4, 5, 'auto' ]);\r\n\r\nconst Margin = PropTypes.oneOfType([\r\n  PropTypes.oneOf([ false ]),\r\n  Spacing,\r\n  PropTypes.exact({ t: Spacing, b: Spacing, y: Spacing, l: MarginAuto, r: MarginAuto, x: MarginAuto })\r\n]);\r\n\r\nconst Padding = PropTypes.oneOfType([\r\n  PropTypes.oneOf([ false ]),\r\n  Spacing,\r\n  PropTypes.exact({ t: Spacing, b: Spacing, y: Spacing, l: Spacing, r: Spacing, x: Spacing })\r\n]);\r\n\r\nexport const BsMargin = PropTypes.oneOfType([\r\n  Margin,\r\n  PropTypes.exact({\r\n    def : Margin,\r\n    sm  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Margin ]),\r\n    md  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Margin ]),\r\n    lg  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Margin ]),\r\n    xl  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Margin ])\r\n  })\r\n]);\r\n\r\nexport const BsPadding = PropTypes.oneOfType([\r\n  Padding,\r\n  PropTypes.exact({\r\n    def : Padding,\r\n    sm  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Padding ]),\r\n    md  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Padding ]),\r\n    lg  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Padding ]),\r\n    xl  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Padding ])\r\n  })\r\n]);\r\n\r\n\r\n// TODO: Border\r\nexport const BsBorder = PropTypes.oneOfType([\r\n  PropTypes.bool,\r\n  PropTypes.exact({ t: PropTypes.bool, b: PropTypes.bool, l: PropTypes.bool, r: PropTypes.bool })\r\n]);\r\n\r\nexport const BsRounded = PropTypes.oneOfType([\r\n  PropTypes.bool,\r\n  PropTypes.exact({\r\n    size: PropTypes.oneOf([ 'sm', 'lg' ]),\r\n    type: PropTypes.oneOf([ 'top', 'bottom', 'left', 'right', 'circle', 'pill' ])\r\n  })\r\n]);\r\n\r\n\r\n// TODO: Display\r\nconst Col12 = PropTypes.oneOf([ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 ]);\r\nconst ColWidth = PropTypes.oneOfType([ Col12, PropTypes.oneOf([ 'auto' ])]);\r\nconst ColOrder = PropTypes.oneOfType([ Col12, PropTypes.oneOf([ 'first', 'last' ])]);\r\n\r\nexport const BreakPoint = PropTypes.oneOf([ 'def', 'sm', 'md', 'lg', 'xl' ]);\r\n\r\nexport const BsHidden = PropTypes.oneOfType([\r\n  PropTypes.bool,\r\n  BreakPoint,\r\n  PropTypes.arrayOf(BreakPoint)\r\n]);\r\n\r\nexport const BsColWidth = PropTypes.oneOfType([\r\n  ColWidth,\r\n  PropTypes.exact({\r\n    def : ColWidth,\r\n    sm  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), ColWidth ]),\r\n    md  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), ColWidth ]),\r\n    lg  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), ColWidth ]),\r\n    xl  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), ColWidth ])\r\n  })\r\n]);\r\n\r\nexport const BsColOffset = PropTypes.oneOfType([\r\n  PropTypes.oneOf([ false ]),\r\n  Col12,\r\n  PropTypes.exact({\r\n    def : Col12,\r\n    sm  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Col12 ]),\r\n    md  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Col12 ]),\r\n    lg  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Col12 ]),\r\n    xl  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), Col12 ])\r\n  })\r\n]);\r\n\r\nexport const BsColOrder = PropTypes.oneOfType([\r\n  PropTypes.oneOf([ false ]),\r\n  ColOrder,\r\n  PropTypes.exact({\r\n    def : ColOrder,\r\n    sm  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), ColOrder ]),\r\n    md  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), ColOrder ]),\r\n    lg  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), ColOrder ]),\r\n    xl  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), ColOrder ])\r\n  })\r\n]);\r\n\r\n\r\n// TODO: Bootstrap Tag Name & Children\r\nexport const BsTagName = PropTypes.oneOfType([ PropTypes.string, PropTypes.elementType ]);\r\n\r\nexport const BsChildren = PropTypes.any.isRequired;\r\n\r\n\r\n// TODO: Button Code\r\nexport const CLOSE_MODAL = Symbol('CLOSE_MODAL');\r\n","import { createElement } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { uniqueArray, getBsClass, getContainerClasses } from './options.fn';\r\n\r\nimport {\r\n  BsContainerColor,\r\n  BsTagName,\r\n  BsChildren,\r\n  BreakPoint,\r\n  BsMargin,\r\n  BsPadding,\r\n  BsBorder,\r\n  BsRounded,\r\n  BsHidden,\r\n  BsColWidth,\r\n  BsColOffset,\r\n  BsColOrder\r\n} from './options.type';\r\n\r\n\r\n// TODO: Container\r\nexport const BsContainer = props => createElement(props.tagName || 'div', {\r\n  ...(props.options || {}),\r\n  className: `container ${ getContainerClasses('block', props) }`\r\n}, props.children);\r\n\r\nBsContainer.propTypes = {\r\n  children  : BsChildren,\r\n  tagName   : BsTagName,\r\n  className : PropTypes.string,\r\n\r\n  margin  : BsMargin,\r\n  padding : BsPadding,\r\n  border  : BsBorder,\r\n  rounded : BsRounded,\r\n  colors  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), BsContainerColor ]),\r\n  hidden  : BsHidden,\r\n  options : PropTypes.object\r\n};\r\n\r\n\r\n// TODO: Row\r\nexport const BsRow = props => createElement(props.tagName || 'div', {\r\n  ...(props.options || {}),\r\n  className: `row ${ getContainerClasses('flex', props) } ${ uniqueArray([\r\n    (props.gutters || true) === true ? '' : 'no-gutters',\r\n    (props.align || false) === false ? '' : `justify-content-${ getBsClass({ size: props.alignable, end: props.align }) }`\r\n  ]).join(' ')}`\r\n}, props.children);\r\n\r\nBsRow.propTypes = {\r\n  children  : BsChildren,\r\n  tagName   : BsTagName,\r\n  className : PropTypes.string,\r\n\r\n  margin  : BsMargin,\r\n  padding : BsPadding,\r\n  border  : BsBorder,\r\n  rounded : BsRounded,\r\n  colors  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), BsContainerColor ]),\r\n  hidden  : BsHidden,\r\n\r\n  gutters   : PropTypes.bool,\r\n  align     : PropTypes.oneOf([ false, 'start', 'center', 'end', 'around', 'between' ]),\r\n  alignable : BreakPoint,\r\n  options   : PropTypes.object\r\n};\r\n\r\n\r\n// TODO: Column\r\nfunction getColOptions(options, fn) {\r\n  const opts = options instanceof Object ? options : { def: options };\r\n\r\n  Object.keys(opts).forEach(size => opts[size] === false ? null : fn(size, opts[size]));\r\n}\r\n\r\nfunction getColClasses({ width = 'auto', offset = false, order = false }) {\r\n  return [ width, offset, order ].reduce((cls, option, i) => {\r\n    switch (i) {\r\n      case 0: getColOptions(option, (size, opts) =>\r\n        cls.push(getBsClass({ size, start: 'col', end: 'auto' === opts ? '' : opts }))\r\n      ); break;\r\n      case 1: getColOptions(option, (size, opts) =>\r\n        cls.push(getBsClass({ size, start: 'offset', end: opts }))\r\n      ); break;\r\n      case 2: getColOptions(option, (size, opts) =>\r\n        cls.push(getBsClass({ size, start: 'order', end: opts }))\r\n      ); break;\r\n      default:\r\n    }\r\n    return [ ...cls ];\r\n  }, []);\r\n}\r\n\r\nexport const BsCol = props => createElement(props.tagName || 'div', {\r\n  ...(props.options || {}),\r\n  className: `${ getContainerClasses('block', props) } ${ uniqueArray(['col', ...getColClasses(props)]).join(' ')}`\r\n}, props.children);\r\n\r\nBsCol.propTypes = {\r\n  children  : BsChildren,\r\n  tagName   : BsTagName,\r\n  className : PropTypes.string,\r\n\r\n  margin  : BsMargin,\r\n  padding : BsPadding,\r\n  border  : BsBorder,\r\n  rounded : BsRounded,\r\n  colors  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), BsContainerColor ]),\r\n  hidden  : BsHidden,\r\n\r\n  width   : BsColWidth,\r\n  offset  : BsColOffset,\r\n  order   : BsColOrder,\r\n  options : PropTypes.object\r\n};\r\n","import { useCallback, useState, useEffect } from 'react';\r\n\r\n\r\nfunction getInvalid(result) {\r\n  return result === false ? 'MSG_INVALID_VALUE' : 'string' === typeof result && !!result ? result : false;\r\n}\r\n\r\nexport function isInvalidDisabled(invalid) {\r\n  return invalid === undefined || ('string' === typeof invalid && !!invalid.trim());\r\n}\r\n\r\nexport function useCancelEvent() {\r\n  return useCallback(e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }, []);\r\n}\r\n\r\nexport function useSelectOption({ onSelect }) {\r\n  const doSelect = useCallback(option => onSelect(option), [ onSelect ]);\r\n\r\n  return useCallback(option => (() => doSelect(option)), [ doSelect ]);\r\n};\r\n\r\nexport function useChange([ value, setValue ], validation = () => true) {\r\n  const [ invalid, setInvalid ] = useState();\r\n\r\n  useEffect(() => {\r\n    const vres = validation(value);\r\n\r\n    if (vres instanceof Promise)\r\n      vres.then(result => setInvalid(getInvalid(result)));\r\n    else\r\n      setInvalid(getInvalid(vres));\r\n  }, [ value, validation, setInvalid ]);\r\n\r\n  return [\r\n    value,\r\n    useCallback(e => setValue(e.target.value), [ setValue ]),\r\n    invalid\r\n  ];\r\n};\r\n","import React, { useCallback, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\n\r\nimport { useI18n } from '../../services/i18n';\r\n\r\nimport { getColorClasses } from './options.fn';\r\nimport { BsContainerColor, BsChildren, BsBtnColors, CLOSE_MODAL } from './options.type';\r\n\r\n\r\n// TODO: Events\r\nfunction useEvents({ isShow, setShow, backdrop, onShow, handler }) {\r\n  const handlerFn = useCallback(code => () => handler(code) ? null : setShow(false), [ setShow, handler ]);\r\n\r\n  useEffect(() => { if (isShow) onShow(); });\r\n\r\n  return {\r\n    doCloseModal: useCallback(() => handlerFn(CLOSE_MODAL)(), [ handlerFn ]),\r\n\r\n    onHandler: handlerFn,\r\n\r\n    onClickBackdrop: useCallback(\r\n      e => 'static' === backdrop || !$(e.target).hasClass('puzzle-bingo-bs') ? null : handlerFn(CLOSE_MODAL)(),\r\n      [ backdrop, handlerFn ]\r\n    )\r\n  };\r\n}\r\n\r\n// TODO: Components\r\nexport default function BsModal({\r\n  children,\r\n  size = 'default',\r\n  show: [ isShow, setShow ],\r\n  colors,\r\n  backdrop,\r\n  icon = '',\r\n  title = '',\r\n  btns = [],\r\n  handler = () => {},\r\n  onShow = () => {}\r\n}) {\r\n  const { get } = useI18n();\r\n  const { doCloseModal, onHandler, onClickBackdrop } = useEvents({ isShow, setShow, backdrop, onShow, handler });\r\n\r\n  return !isShow ? null : (\r\n    <div className=\"puzzle-bingo-bs modal fade show\" onClick={ onClickBackdrop }>\r\n      <div className={ `modal-dialog ${ 'default' === size ? '' : `modal-${ size }` }` }>\r\n        <div className={ `modal-content ${ getColorClasses(colors) }` }>\r\n\r\n          {/* TODO: Header */}\r\n          { !title ? null : (\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">\r\n                { !icon ? null : <i className={ `mr-2 ${icon}` } /> }\r\n                { get(title) }\r\n              </h5>\r\n\r\n              { 'static' === backdrop ? null : (\r\n                <button type=\"button\" className=\"close\" onClick={ doCloseModal }>\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* TODO: Body */}\r\n          <div className=\"modal-body\">\r\n            { children }\r\n          </div>\r\n\r\n          {/* TODO: Footer Buttons */}\r\n          { btns.length === 0 ? null : (\r\n            <div className=\"modal-footer\">\r\n              { btns.map(({ icon: btnIcon, text, code = CLOSE_MODAL, color = 'secondary' }) =>\r\n                <button type=\"button\" className={ `btn btn-${ color }` } onClick={ onHandler(code) }>\r\n                  { !btnIcon ? null : <i className={ `mr-2 ${ btnIcon }` } />}\r\n                  { get(text) }\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nBsModal.propTypes = {\r\n  children : BsChildren,\r\n  size     : PropTypes.oneOf([ 'default', 'sm', 'lg', 'xl' ]),\r\n  icon     : PropTypes.string,\r\n  title    : PropTypes.string,\r\n  show     : PropTypes.array.isRequired,\r\n  backdrop : PropTypes.oneOf([ 'static' ]),\r\n  colors   : BsContainerColor,\r\n  handler  : PropTypes.func,\r\n  onShow   : PropTypes.func,\r\n  btns     : PropTypes.arrayOf(PropTypes.exact({\r\n    icon   : PropTypes.string,\r\n    text   : PropTypes.string,\r\n    color  : BsBtnColors,\r\n    code   : PropTypes.instanceOf(Symbol)\r\n  }))\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { getColorClasses } from './options.fn';\r\nimport { BsContainerColor, BsChildren } from './options.type';\r\n\r\n\r\nexport default function BsCollapse({\r\n  children,\r\n  className = '',\r\n  isShow,\r\n  colors,\r\n  onShow = () => {}\r\n}) {\r\n  useEffect(() => { if (isShow) onShow(); });\r\n\r\n  return !isShow ? null : (\r\n    <div className={ `collapse show ${ className } ${ getColorClasses(colors) }` }>\r\n      { children }\r\n    </div>\r\n  );\r\n};\r\n\r\nBsCollapse.propTypes = {\r\n  children  : BsChildren,\r\n  className : PropTypes.string,\r\n  isShow    : PropTypes.bool.isRequired,\r\n  colors    : BsContainerColor,\r\n  onShow    : PropTypes.func\r\n};\r\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { useI18n } from '../../services/i18n';\r\nimport { GameCustom } from '../../services/game';\r\n\r\nimport { useChange, useCancelEvent, isInvalidDisabled } from '../../services/custom/events';\r\n\r\nimport BsModal from '../bs/Modal';\r\nimport BsCollapse from '../bs/Collapse';\r\nimport { BsContainer, BsRow, BsCol } from '../bs/Grid';\r\n\r\nimport logo from '../../assets/imgs/logo-bingo.png';\r\nimport '../../assets/css/IntroModal.scss';\r\n\r\n\r\n// TODO: Custom Functions\r\nfunction useGameID(dispatch) {\r\n  return useChange(\r\n    useState((new URL(window.location.href).searchParams.get('gameID') || '').replace('#/', '')),\r\n    useCallback(id => !id ? 'MSG_REQUIRED_GAME_ID' : new Promise(resolve => dispatch({\r\n      action: 'SEARCH_GAME',\r\n      gameID: id,\r\n      onSuccess: () => resolve(true),\r\n      onFail: err => resolve(err)\r\n    })), [ dispatch ])\r\n  );\r\n}\r\n\r\nfunction useIntroModal({ setShow }) {\r\n  const { dispatch } = GameCustom.useGame();\r\n  const [ gameID, onChangeID, invalidID ] = useGameID(dispatch);\r\n  const [ expand, setExpand ] = useState(useMemo(() => gameID ? 'join' : 'main', [ gameID ]));\r\n  const doSwitch = useCallback(collapseID => setExpand(collapseID), [ setExpand ]);\r\n\r\n  useEffect(() => 'main' === expand ? window.history.replaceState({}, document.title, '/puzzle-bingo339') : undefined);\r\n\r\n  return {\r\n    gameID,\r\n    expand,\r\n    invalidID,\r\n    onChangeID,\r\n\r\n    onSubmit: useCancelEvent(),\r\n\r\n    onSwitch: useCallback(options => () => doSwitch(options), [ doSwitch ]),\r\n\r\n    onNewGame: useCallback(() => dispatch({\r\n      action    : 'NEW_GAME',\r\n      onSuccess : ({ gameID }) => {\r\n        setShow(false);\r\n\r\n        window.open(`https://social-plugins.line.me/lineit/share?url=${ encodeURIComponent(\r\n          `https://tabacotaco.github.io/puzzle-bingo339?gameID=${ gameID }`\r\n        )}`);\r\n      }\r\n    }), [ dispatch, setShow ]),\r\n\r\n    onJoinGame: useCallback(() => dispatch({\r\n      action    : 'JOIN_GAME',\r\n      gameID    : gameID,\r\n      onSuccess : () => {\r\n        setShow(false);\r\n        window.history.replaceState({}, document.title, '/puzzle-bingo339');\r\n      },\r\n      onFail    : err => console.log(err)\r\n    }), [ gameID, dispatch, setShow ])\r\n  };\r\n}\r\n\r\n\r\n// TODO: Component\r\nexport default function IntroModal({ show: [ show, setShow ] }) {\r\n  const { get } = useI18n();\r\n  const { gameID, expand, invalidID, onSubmit, onSwitch, onChangeID, onNewGame, onJoinGame } = useIntroModal({ setShow });\r\n\r\n  return (\r\n    <BsModal show={[ show, setShow ]} backdrop=\"static\" size=\"lg\" colors={{ bg: 'dark', text: 'white' }}>\r\n      <BsCollapse isShow={ 'main' === expand }>\r\n        <BsContainer className=\"intro-container\" border rounded padding={{ x: 2, y: 5 }} colors={{ border: 'warning' }}>\r\n          <h4 className=\"welcome-title text-center text-warning font-weight-light font-italic text-shadow-sm-light\">\r\n            Welcome To\r\n          </h4>\r\n\r\n          <h1 className=\"text-center game-title my-5 text-shadow-sm-light font-weight-bolder\">\r\n            <span className=\"title-head text-primary font-italic\">Puzzle</span>\r\n            <span className=\"title-body text-danger\">Bingo</span>\r\n\r\n            <img alt=\"Logo\" src={ logo } />\r\n          </h1>\r\n\r\n          <BsRow className=\"intro-dashboard\" align=\"center\">\r\n            <BsCol width={{ def: 10, sm: 8, md: 6 }}>\r\n              <button type=\"button\" className=\"btn btn-link btn-lg btn-block text-secondary\" onClick={ onNewGame }>\r\n                <i className=\"fa fa-gamepad mr-2 text-warning\" />{ get('NEW_GAME') }\r\n              </button>\r\n\r\n              <button type=\"button\" className=\"btn btn-link btn-lg btn-block text-secondary\" onClick={ onSwitch('join') }>\r\n                <i className=\"fa fa-sign-in mr-2 text-warning\" />{ get('JOIN_GAME') }\r\n              </button>\r\n            </BsCol>\r\n          </BsRow>\r\n        </BsContainer>\r\n      </BsCollapse>\r\n\r\n      <BsCollapse isShow={ 'join' === expand }>\r\n        <form onSubmit={ onSubmit }>\r\n          <div className=\"modal-body\">\r\n            <BsContainer>\r\n              <BsRow>\r\n                <BsCol className=\"form-group\">\r\n                  <input type=\"text\" className=\"form-control\" value={ gameID } onChange={ onChangeID } />\r\n\r\n                  { !invalidID ? null : (\r\n                    <div className=\"py-2 px-3 my-1 text-warning\">\r\n                      <i className=\"fa fa-exclamation mr-2\" />{ get(invalidID) }\r\n                    </div>\r\n                  )}\r\n                </BsCol>\r\n              </BsRow>\r\n            </BsContainer>\r\n          </div>\r\n\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" className=\"btn btn-secondary\" onClick={ onSwitch('main') }>\r\n              <i className=\"fa fa-undo mr-2\" /> Back\r\n            </button>\r\n\r\n            <button type=\"submit\" className=\"btn btn-danger\" disabled={ isInvalidDisabled(invalidID) } onClick={ onJoinGame }>\r\n              <i className=\"fa fa-undo mr-2\" /> Join\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </BsCollapse>\r\n    </BsModal>\r\n  );\r\n};\r\n\r\nIntroModal.propTypes = {\r\n  show: PropTypes.array.isRequired\r\n};\r\n","import React, { createElement, useState, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { getContainerClasses } from './options.fn';\r\n\r\nimport {\r\n  BsTagName,\r\n  BsChildren,\r\n  BsMargin,\r\n  BsPadding,\r\n  BsBorder,\r\n  BsRounded,\r\n  BsContainerColor\r\n} from './options.type';\r\n\r\n\r\n// TODO: Private Component\r\nconst BsCardExtends = ({ tagName, children, name, className = '' }) => createElement(tagName, {\r\n  className: `${ name } ${ className }`\r\n}, children);\r\n\r\nconst defaultPropTypes = {\r\n  tagName   : BsTagName,\r\n  children  : BsChildren,\r\n  className : PropTypes.string\r\n};\r\n\r\nBsCardExtends.propTypes = {\r\n  ...defaultPropTypes,\r\n  tagName : BsTagName.isRequired,\r\n  name    : PropTypes.string.isRequired\r\n};\r\n\r\n\r\n// TODO: Card Components\r\nexport const BsCardTitle = props => BsCardExtends({ ...props, name: 'card-title' });\r\nBsCardTitle.defaultProps = { tagName: 'h5' };\r\nBsCardTitle.propTypes = defaultPropTypes;\r\n\r\nexport const BsCardText = props => BsCardExtends({ ...props, name: 'card-text' });\r\nBsCardText.defaultProps = { tagName: 'p' };\r\nBsCardText.propTypes = defaultPropTypes;\r\n\r\nexport const BsCardHeader = props => BsCardExtends({\r\n  ...props,\r\n  name      : 'card-header rounded-top',\r\n  className : getContainerClasses('block', props)\r\n});\r\n\r\nBsCardHeader.defaultProps = { tagName: 'div' };\r\nBsCardHeader.propTypes = {\r\n  ...defaultPropTypes,\r\n\r\n  margin  : BsMargin,\r\n  padding : BsPadding,\r\n  border  : BsBorder,\r\n  rounded : BsRounded,\r\n  colors  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), BsContainerColor ])\r\n};\r\n\r\nexport const BsCardBody = props => BsCardExtends({\r\n  ...props,\r\n  name      : 'card-body',\r\n  className : getContainerClasses('block', props)\r\n});\r\n\r\nBsCardBody.defaultProps = { tagName: 'div' };\r\nBsCardBody.propTypes = {\r\n  ...defaultPropTypes,\r\n\r\n  margin  : BsMargin,\r\n  padding : BsPadding,\r\n  border  : BsBorder,\r\n  rounded : BsRounded,\r\n  colors  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), BsContainerColor ])\r\n};\r\n\r\nexport const BsCardFooter = props => BsCardExtends({\r\n  ...props,\r\n  name      : 'card-footer rounded-bottom',\r\n  className : getContainerClasses('block', props)\r\n});\r\n\r\nBsCardFooter.defaultProps = { tagName: 'div' };\r\nBsCardFooter.propTypes = {\r\n  ...defaultPropTypes,\r\n\r\n  margin  : BsMargin,\r\n  padding : BsPadding,\r\n  border  : BsBorder,\r\n  rounded : BsRounded,\r\n  colors  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), BsContainerColor ])\r\n};\r\n\r\n\r\n// TODO: Card Panel\r\nfunction useCustomCard(image) {\r\n  const [ visibled, setVisibled ] = useState(!image);\r\n\r\n  return {\r\n    visibled,\r\n    onImageLoad: useCallback(() => setVisibled(true), [ setVisibled ])\r\n  };\r\n}\r\n\r\nexport default function BsCard(props) {\r\n  const { children, image } = props;\r\n  const { visibled, onImageLoad } = useCustomCard(image);\r\n\r\n  return (\r\n    <div className={`card ${ getContainerClasses(visibled ? 'flex' : 'none', props) }`}>\r\n      { !image ? null : (\r\n        <img className=\"card-img-top\" alt=\"card-header\" src={ image } onLoad={ onImageLoad } />\r\n      )}\r\n\r\n      { children }\r\n    </div>\r\n  );\r\n};\r\n\r\nBsCard.propTypes = {\r\n  children  : BsChildren,\r\n  className : PropTypes.string,\r\n  image     : PropTypes.string,\r\n  \r\n  margin  : BsMargin,\r\n  padding : BsPadding,\r\n  border  : BsBorder,\r\n  rounded : BsRounded,\r\n  colors  : PropTypes.oneOfType([ PropTypes.oneOf([ false ]), BsContainerColor ])\r\n};\r\n","import React, { useMemo, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { useI18n } from '../../services/i18n';\r\nimport { GameCustom } from '../../services/game';\r\n\r\nimport BsCard, { BsCardHeader, BsCardBody, BsCardFooter, BsCardTitle, BsCardText } from '../bs/Card';\r\n\r\nimport '../../assets/css/BingoCard.scss';\r\n\r\n\r\n// TODO: Custom Function\r\nfunction useBingoCard({ card, onUseCard }) {\r\n  const { rangeX: x, rangeY: y, ranges } = card;\r\n\r\n  return {\r\n    bgClass   : useMemo(() => 'ATTACK' === card.type ? 'bg-teal' : 'bg-warning', [ card ]),\r\n    ranges    : useMemo(() => !ranges ? [{ x, y }] : ranges, [ x, y, ranges ]),\r\n    doUseCard : useCallback(() => onUseCard(card), [ onUseCard, card ])\r\n  };\r\n}\r\n\r\n\r\n// TODO: Component - BingoCard\r\nexport default function BingoCard({ card, onUseCard = () => {} }) {\r\n  const { get } = useI18n();\r\n  const { type, description, count = 0 } = card;\r\n  const { bgClass, ranges, doUseCard } = useBingoCard({ card, onUseCard });\r\n\r\n  return (\r\n    <BsCard className={`card-info text-dark ${ bgClass }`} image={ GameCustom.useCardImage(card) }>\r\n      <BsCardHeader className=\"font-weight-bolder text-shadow-sm-dark\">\r\n        <i className=\"fa fa-magic mr-2\" />\r\n        { get(`CARD_TITLE_FOR_${ type }`) }\r\n      </BsCardHeader>\r\n\r\n      <BsCardBody>\r\n        <BsCardTitle className=\"font-weight-bolder text-shadow-sm-dark\">\r\n          { get(`CARD_NAME_${ type }_${ description }`) }\r\n        </BsCardTitle>\r\n\r\n        { !count ? null : (\r\n          <BsCardText>\r\n            <label className=\"font-weight-bolder mr-2\">\r\n              { get('CARD_LABEL_COUNT') }:\r\n            </label>\r\n\r\n            { count }\r\n          </BsCardText>\r\n        )}\r\n\r\n        <BsCardText>\r\n          <label className={`font-weight-bolder mr-2 ${ ranges.lengnth > 1 ? 'd-block' : '' }`}>\r\n            { get('CARD_LABEL_RANGE') }:\r\n          </label>\r\n\r\n          { ranges.map(({ x, y }, i) => (\r\n            <span key={`range-${ i }`} className={ ranges.lengnth > 1 ? 'd-block' : '' }>\r\n              { x } &times; { y }\r\n            </span>\r\n          ))}\r\n        </BsCardText>\r\n\r\n        <BsCardText>\r\n          <label className=\"font-weight-bolder d-block mr-2\">\r\n            { get('CARD_LABEL_DESC') }:\r\n          </label>\r\n\r\n          { get(`CARD_DESC_${ type }_${ description }`) }\r\n        </BsCardText>\r\n      </BsCardBody>\r\n\r\n      { count ? null : (\r\n        <BsCardFooter className=\"text-center\">\r\n          <button type=\"button\" className=\"btn btn-dark\" onClick={ doUseCard }>\r\n            <i className=\"fa fa-map-marker mr-2\" />{ get('BTN_USE_CARD') }\r\n          </button>\r\n        </BsCardFooter>\r\n      )}\r\n    </BsCard>\r\n  );\r\n};\r\n\r\nBingoCard.propTypes = {\r\n  card: PropTypes.exact({\r\n    type        : PropTypes.oneOf([ 'ATTACK', 'DEFENSE' ]).isRequired,\r\n    description : PropTypes.oneOf([ 'BOMB', 'FOG', 'LOCK', 'MIRROR' ]).isRequired,\r\n    count       : PropTypes.number,\r\n    rangeX      : PropTypes.oneOf([ 1, 3, 9 ]),\r\n    rangeY      : PropTypes.oneOf([ 1, 3, 9 ]),\r\n    ranges      : PropTypes.arrayOf(\r\n      PropTypes.exact({\r\n        rangeX  : PropTypes.oneOf([ 1, 3, 9 ]).isRequired,\r\n        rangeY  : PropTypes.oneOf([ 1, 3, 9 ]).isRequired\r\n      })\r\n    )\r\n  }).isRequired ,\r\n  onUseCard     : PropTypes.func\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\n\r\nexport const EmptyNumbers = [{}, {}, {}, {}, {}, {}, {}, {}, {}];\r\n\r\nexport const DefaultZones = {\r\n  0: { bgClass: 'zone-bg-1' },\r\n  1: { bgClass: 'zone-bg-2' },\r\n  2: { bgClass: 'zone-bg-3' },\r\n  3: { bgClass: 'zone-bg-4' },\r\n  4: { bgClass: 'zone-bg-5' },\r\n  5: { bgClass: 'zone-bg-6' },\r\n  6: { bgClass: 'zone-bg-7' },\r\n  7: { bgClass: 'zone-bg-8' },\r\n  8: { bgClass: 'zone-bg-9' }\r\n};\r\n\r\nexport const TerritoryZoneType = PropTypes.exact({\r\n  bgClass : PropTypes.string.isRequired,\r\n  numbers : PropTypes.arrayOf(PropTypes.exact({\r\n    x       : PropTypes.number.isRequired,\r\n    y       : PropTypes.number.isRequired,\r\n    number  : PropTypes.number.isRequired,\r\n    effects : PropTypes.exact({\r\n      built    : PropTypes.bool,\r\n      stong    : PropTypes.bool, // true is defensing\r\n      fog      : PropTypes.bool, // true was attacked\r\n      occupied : PropTypes.bool, // true was attacked\r\n      mirror   : PropTypes.bool  // true is defensing\r\n    })\r\n  }))\r\n}).isRequired;\r\n","import React, { createElement, useCallback, useState, useEffect, useRef, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\n\r\nimport { useI18n } from '../../services/i18n';\r\nimport { GameCustom } from '../../services/game';\r\nimport { DefaultZones, EmptyNumbers, TerritoryZoneType } from './options.type';\r\n\r\nimport { BsContainer, BsRow, BsCol } from '../bs/Grid';\r\n\r\nimport '../../assets/css/Territories.scss';\r\n\r\n\r\n// TODO: Custom Function\r\nfunction useLand({ isSelecting, number, effects = {} }) {\r\n  const { get } = useI18n();\r\n  const { built = false, stong = false, fog = false, occupied = false, mirror = false } = effects;\r\n\r\n  const landRef     = useRef();\r\n  const prevEffects = useRef();\r\n  const { current: $effects } = prevEffects || {};\r\n\r\n  const isDefensing = useMemo(() => stong || mirror, [ stong, mirror ]);\r\n  const tipContent  = useMemo(\r\n    () => `\r\n      ${ !stong  ? '' : `<img alt=\"stong-house\" class=\"defense-icon\" src=\"${ GameCustom.useCardImage({ type: 'DEFENSE', description: 'BOMB' }) }\" />` }\r\n      ${ !mirror ? '' : `<img alt=\"mirror\" class=\"defense-icon\" src=\"${ GameCustom.useCardImage({ type: 'DEFENSE', description: 'MIRROR' }) }\" />` }\r\n    `,\r\n    [ stong, mirror ]\r\n  );\r\n  \r\n  useEffect(() => {\r\n    if (isDefensing) $(landRef.current).popover({\r\n      title   : get('TERRITORIES_TITLE_DEFENSES') ,\r\n      toggle  : 'popover'  , container : 'body'   ,\r\n      html    : true       , trigger   : 'hover'  ,\r\n      content : tipContent , placement : 'bottom'\r\n    });\r\n    prevEffects.current = { $built: built, $stong: stong, $fog: fog, $occupied: occupied, $mirror: mirror };\r\n  });\r\n\r\n  return {\r\n    landRef,\r\n\r\n    selectable  : useMemo(() => isSelecting && (fog || !occupied || !built), [ isSelecting, fog, occupied, built ]),\r\n\r\n    displayText : useMemo(() =>  fog || occupied ? '' : number, [ fog, occupied, number ]),\r\n\r\n    className   : useMemo(\r\n      () => `p-0 col-4 rounded border bingo-number text-center ${\r\n        fog ? 'poison-fog' : occupied ? 'occupied' : !built ? '' : stong ? 'built-stong' : 'built-house'\r\n      }`,\r\n      [ fog, occupied, stong, built ]\r\n    ),\r\n\r\n    animation   : useMemo(() => {\r\n      const { $built = false, $stong = false, $fog = false, $occupied = false, $mirror = false } = $effects || {};\r\n\r\n      if ($mirror && !mirror)\r\n        return 'mirror-trigger-shown 2 .8s linear';\r\n      else if (!$mirror && mirror)\r\n        return 'mirror-set 1 .6s linear';\r\n      else if ($fog && !fog)\r\n        return 'poison-fog-hidden 1 .8s linear';\r\n      else if ($occupied && !occupied)\r\n        return 'unoccupied-shown';\r\n      else if ($stong && !stong)\r\n        return 'stong-destroyed';\r\n      else if ($built && !built)\r\n        return 'house-destroyed';\r\n\r\n      return undefined;\r\n    }, [ $effects, built, stong, fog, occupied, mirror ]) \r\n  };\r\n}\r\n\r\nfunction useTerritories({ cursor, mode }) {\r\n  const [ cursorOn, setCursorOn ] = useState({ show: false, clientX: 0, clientY: 0 });\r\n\r\n  return {\r\n    cursorOn,\r\n\r\n    onHoverCursor: useCallback(show => e => !cursor && mode !== 'switch' ? null : setCursorOn({\r\n      show,\r\n      clientX: e.clientX,\r\n      clientY: e.clientY,\r\n      ...(!show ? {} : (el => {\r\n        if (!el.classList.contains('bingo-number'))\r\n          return {};\r\n\r\n        return {\r\n          hoverX: el.getAttribute('data-x'),\r\n          hoverY: el.getAttribute('data-y'),\r\n          hoverZ: el.getAttribute('data-z')\r\n        };\r\n      })(document.elementFromPoint(e.clientX, e.clientY)))\r\n    }), [ cursor, mode ])\r\n  };\r\n}\r\n\r\n\r\n// TODO: Private Component\r\nfunction Land({\r\n  isSelecting = false,\r\n  onSelected  = () => {},\r\n  effects,\r\n  options: {\r\n    i, z,\r\n    n = '',\r\n    x = parseFloat(z) % 3 * 3 + i % 3,\r\n    y = Math.floor(parseFloat(z) / 3) * 3 + Math.floor(i / 3)\r\n  }\r\n}) {\r\n  const { selectable, landRef, displayText, className, animation } = useLand({ isSelecting, number: n, effects });\r\n\r\n  return createElement(selectable ? 'button' : 'div', {\r\n    ref: landRef,\r\n    className,\r\n    style: { animation },\r\n    'data-x' : x,\r\n    'data-y' : y,\r\n    'data-z' : z,\r\n    ...(!selectable ? {} : { onClick: () => onSelected({ number: n, x, y, z })})\r\n  }, displayText);\r\n}\r\n\r\n\r\n// TODO: Territories Component\r\nexport default function Territories({\r\n  cursor,\r\n  mode,\r\n  zones       = DefaultZones,\r\n  className   = '',\r\n  hoverOn     = 'cell',\r\n  isMime      = false,\r\n  isSelecting = false,\r\n  onSelected  = () => {}\r\n}) {\r\n  const {\r\n    onHoverCursor,\r\n    cursorOn: { show, clientX, clientY, hoverX, hoverY, hoverZ }\r\n  } = useTerritories({ cursor, mode });\r\n\r\n  return (\r\n    <BsContainer padding={ 0 } options={{\r\n      'data-hover-x' : hoverX,\r\n      'data-hover-y' : hoverY,\r\n      'data-hover-z' : hoverZ,\r\n      onMouseMove    : onHoverCursor(true),\r\n      onMouseLeave   : onHoverCursor(false)\r\n    }} className={`territories ${ className } ${ mode }-${ 'switch' === mode ? 'zone' : hoverOn }`}>\r\n      { !show || !cursor ? null : (\r\n        <img className=\"cursor\" alt=\"cursor\" src={ cursor } style={{ top: clientY, left: clientX }} />\r\n      )}\r\n\r\n      <BsRow align=\"center\">\r\n        { Object.keys(zones).map(z => ({ ...zones[z], z })).map(({ z, numbers = EmptyNumbers, bgClass }) => (\r\n          <BsCol key={`zone-${ z }`} className={`container zone ${ bgClass }`} padding={ 0 } margin={ 0 } width={ 4 } border rounded>\r\n            <BsRow margin={ 1 } options={{ style: { opacity: isSelecting ? 1 : .8 }}}>\r\n              { numbers.map(({ x, y, number, effects }, i) => (\r\n                <Land key={`number-${ number || i }`} {...{\r\n                  isSelecting , options : { n: number, x, y, z, i },\r\n                  onSelected  , effects : isMime ? effects : undefined\r\n                }} />\r\n              ))}\r\n            </BsRow>\r\n          </BsCol>\r\n        ))}\r\n      </BsRow>\r\n    </BsContainer>\r\n  );\r\n};\r\n\r\nTerritories.propTypes = {\r\n  className   : PropTypes.string,\r\n  isSelecting : PropTypes.bool,\r\n  mode        : PropTypes.oneOf([ 'attack', 'defense', 'build', 'switch' ]).isRequired,\r\n  hoverOn     : PropTypes.oneOf([ 'cell', 'line-x', 'line-y', 'zone' ]),\r\n  cursor      : PropTypes.string,\r\n  onSelected  : PropTypes.func,\r\n  zones       : PropTypes.oneOfType([\r\n    PropTypes.exact({}),\r\n    PropTypes.shape({\r\n      0: TerritoryZoneType,\r\n      1: TerritoryZoneType,\r\n      2: TerritoryZoneType,\r\n      3: TerritoryZoneType,\r\n      4: TerritoryZoneType,\r\n      5: TerritoryZoneType,\r\n      6: TerritoryZoneType,\r\n      7: TerritoryZoneType,\r\n      8: TerritoryZoneType\r\n    })\r\n  ])\r\n};\r\n","import React, { useMemo, useCallback, createElement } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { useI18n } from '../../services/i18n';\r\nimport { GameCustom } from '../../services/game';\r\n\r\nimport { BsContainer, BsRow, BsCol } from '../bs/Grid';\r\n\r\nimport BingoCard from './BingoCard';\r\nimport Territories from './Territories';\r\n\r\nimport '../../assets/css/GameStep.scss';\r\n\r\n\r\n// TODO: Custom Functions\r\nfunction useStepName({ status, step = 0, card = {} }) {\r\n  return useMemo(() => {\r\n    switch (status) {\r\n      case 'WAITING'  : return 'Waiting';\r\n      case 'FINISH'   : return 'Finish';\r\n      case 'PLAYING'  :\r\n        switch (step) {\r\n          case 0      : return 'Switch';\r\n          case 1      : return 'GetCard';\r\n          case 2      : return 'ShowCard';\r\n          case 3      : return 'ATTACK' === card.type ? 'Attack' : null;\r\n          default     : return null;\r\n        }\r\n      default         : return null;\r\n    }\r\n  }, [ status, step, card ]);\r\n}\r\n\r\n\r\n// TODO: Private Components\r\nfunction CenterMessage({ icon, children, onClose = () => {} }) {\r\n  const { get } = useI18n();\r\n\r\n  return (\r\n    <BsContainer className=\"center-message shadow-light\" padding={ 3 } colors={{ bg: 'warning', text: 'dark' }}>\r\n      <BsRow align=\"center\" padding={{ x: 5 }}>\r\n        <BsCol className=\"tip-content\" width={{ def: 12, sm: 8, md: 4 }}>\r\n          { !icon ? null : (\r\n            <i className={`tip-icon ${ icon.className || icon } ${ icon.animation || '' } float-${ icon.align || 'none' }`} />\r\n          )}\r\n\r\n          { children }\r\n        </BsCol>\r\n\r\n        <BsCol className=\"text-center\" width={ 12 }>\r\n          <button type=\"button\" className=\"btn btn-dark mt-2\" onClick={ onClose }>\r\n            <i className=\"fa fa-undo mr-2\" />{ get('BTN_TO_MENU') }\r\n          </button>\r\n        </BsCol>\r\n      </BsRow>\r\n    </BsContainer>\r\n  );\r\n};\r\n\r\nconst Step = {\r\n  Waiting({ onCancelWaiting = () => {} }) {\r\n    return (\r\n      <div className=\"step-modal d-flex justify-content-center\">\r\n        <CenterMessage icon={{ className: 'fa fa-spinner', align: 'right', animation: 'rotate' }} onClose={ onCancelWaiting }>\r\n          <span className=\"waiting font-weight-bolder\">\r\n            Waiting\r\n          </span>\r\n        </CenterMessage>\r\n      </div>\r\n    );\r\n  },\r\n  \r\n  Finish({ onGameFinish = () => {} }) {\r\n    return (\r\n      <div className=\"step-modal d-flex justify-content-center\">\r\n        <CenterMessage onClose={ onGameFinish }>\r\n          Game Finished !\r\n        </CenterMessage>\r\n      </div>\r\n    );\r\n  },\r\n  \r\n  Switch() {\r\n    const { get } = useI18n();\r\n  \r\n    return (\r\n      <BsContainer className=\"switching-step\" padding={ 3 } margin={{ t: 3 }} rounded colors={{ bg: 'warning', text: 'dark' }}>\r\n        <BsRow align=\"center\">\r\n          <BsCol>\r\n            { get('MSG_WAITING_COMPETITOR') }\r\n          </BsCol>\r\n        </BsRow>\r\n      </BsContainer>\r\n    );\r\n  },\r\n  \r\n  GetCard() {\r\n    const { get } = useI18n();\r\n    const { dispatch } = GameCustom.useGame();\r\n    const onGetCard = useCallback(() => dispatch({ step: 2 }), [ dispatch ]);\r\n  \r\n    return (\r\n      <div className=\"step-modal d-flex justify-content-center\">\r\n        <BsContainer className=\"center-message shadow-light\" padding={ 3 } colors={{ bg: 'warning', text: 'dark' }}>\r\n          <BsRow align=\"center\" padding={{ x: 2 }}>\r\n            <BsCol className=\"text-center\" width={ 12 }>\r\n              { get('MSG_STEP_GET_CARD') }\r\n            </BsCol>\r\n  \r\n            <BsCol className=\"text-center\" width={ 12 } margin={{ t: 3 }}>\r\n              <button type=\"button\" className=\"btn btn-dark\" onClick={ onGetCard }>\r\n                <i className=\"fa fa-magic mr-2\" />{ get('BTN_GET_CARD') }\r\n              </button>\r\n            </BsCol>\r\n          </BsRow>\r\n        </BsContainer>\r\n      </div>\r\n    );\r\n  },\r\n  \r\n  ShowCard() {\r\n    const { card = {}, dispatch } = GameCustom.useGame();\r\n    const onUseCard = useCallback(() => dispatch({ step: 3 }), [ dispatch ]);\r\n  \r\n    return (\r\n      <div className=\"step-modal d-flex justify-content-center\">\r\n        <BingoCard card={ card } onUseCard={ onUseCard } />\r\n      </div>\r\n    );\r\n  },\r\n  \r\n  Attack() {\r\n    const { get } = useI18n();\r\n    const { card = {}, dispatch } = GameCustom.useGame();\r\n    const hoverOn = GameCustom.useCardRange(card);\r\n  \r\n    const doAttack = useCallback(({ x, y, z }) => dispatch({\r\n      action : 'ATTACK',\r\n      target : hoverOn,\r\n      card, x, y, z\r\n    }), [ hoverOn, card, dispatch ]);\r\n  \r\n    return (\r\n      <div className=\"step-modal d-flex justify-content-center\">\r\n        <div className=\"competitor-territories\">\r\n          <h3 className=\"text-center bg-warning text-dark font-weight-bolder mt-3 py-3\">\r\n            { get('MSG_ATTACK_COMPETITOR') }\r\n          </h3>\r\n  \r\n          <Territories isSelecting mode=\"attack\" {...{\r\n            hoverOn,\r\n            cursor     : GameCustom.useCardImage(card),\r\n            onSelected : doAttack\r\n          }} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\n\r\n// TODO: Main Component\r\nexport default function GameStep(props) {\r\n  const { status, step = 0, card = {} } = GameCustom.useGame();\r\n  const name = useStepName({ status, step, card });\r\n\r\n  return useMemo(() => !name ? null : createElement(Step[ name ], props), [ name, props ]);\r\n};\r\n\r\nGameStep.propTypes = {\r\n  onCancelWaiting : PropTypes.func,\r\n  onGameFinish    : PropTypes.func\r\n};\r\n","import React, { useState, useMemo, useCallback } from 'react';\nimport { GameCustom } from '../services/game';\n\nimport { BsContainer, BsRow, BsCol } from './bs/Grid';\n\nimport IntroModal from './panel/IntroModal';\nimport GameStep from './panel/GameStep';\nimport Territories from './panel/Territories';\n\nimport '../assets/css/App.scss';\n\n\n// TODO: Custom Function\nfunction useCustom({ step, card, dispatch }) {\n  const defenseRange = GameCustom.useCardRange(card);\n\n  return {\n    isSelecting: useMemo(() => step === 4 || (step === 3 && 'DEFENSE' === card.type), [ step, card ]),\n\n    mode: useMemo(() => step === 4 ? 'build' : step === 3 && 'DEFENSE' === card.type ? 'defense' : 'switch', [ step, card ]),\n\n    hoverOn: useMemo(() => step === 4 ? 'cell' : step === 3 && 'DEFENSE' === card.type ? defenseRange : 'zone', [ step, card, defenseRange ]),\n\n    onBackToMenu: useCallback(() => window.location.reload(), []),\n\n    onSelected: useCallback(({ x, y, z, number }) => {\n      if (step === 3 && 'DEFENSE' === card.type) dispatch({\n        action : 'DEFENSE',\n        target : defenseRange,\n        card, x, y, z,\n        onSuccess(content) {\n          console.log(content);\n        }\n      });\n    }, [ card, step, dispatch, defenseRange ])\n  };\n}\n\n\n// TODO: Component\nexport default function App() {\n  const show = useState(true);\n  const { zones, step, card, dispatch } = GameCustom.useGame();\n\n  const {\n    isSelecting,\n    mode,\n    hoverOn,\n\n    onBackToMenu,\n    onSelected\n  } = useCustom({ step, card, dispatch });\n\n  return (\n    <div className=\"p-3\">\n      <IntroModal show={ show } />\n\n      <BsContainer padding={ 0 }>\n        <BsRow>\n          <BsCol padding={ 0 }>\n            <BsContainer className=\"app text-white\">\n              <BsRow align=\"center\">\n                <BsCol width={{ def: 11, sm: 10, md: 8, lg: 6}}>\n                  <Territories isMime cursor={ 'defense' === mode ? GameCustom.useCardImage(card) : undefined } {...{\n                    mode,\n                    hoverOn,\n                    isSelecting,\n                    zones,\n                    onSelected\n                  }} />\n                </BsCol>\n              </BsRow>\n\n              <GameStep onCancelWaiting={ onBackToMenu } />\n            </BsContainer>\n          </BsCol>\n        </BsRow>\n      </BsContainer>\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\n\nimport $ from 'jquery';\n\nimport I18n from './services/i18n';\nimport Game from './services/game';\n\nimport App from './components/App';\n\nimport 'hammerjs';\nimport 'popper.js';\nimport './assets/css/index.scss';\n\n\nwindow.$ = $;\n\nimport('bootstrap').then(() => ReactDOM.render((\n  <I18n>\n    <Game>\n      <HashRouter>\n        <Switch>\n          <Route component={ App } />\n        </Switch>\n      </HashRouter>\n    </Game>\n  </I18n>\n), document.getElementById('root')));\n"],"sourceRoot":""}